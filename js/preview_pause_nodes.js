const a0_0xd41398=a0_0x5598;(function(_0x2cd977,_0xcfae6c){const _0x3172f8=a0_0x5598,_0x459d4e=_0x2cd977();while(!![]){try{const _0x5011ef=parseInt(_0x3172f8(0xef))/0x1*(-parseInt(_0x3172f8(0x144))/0x2)+parseInt(_0x3172f8(0xdf))/0x3*(-parseInt(_0x3172f8(0xe8))/0x4)+parseInt(_0x3172f8(0xf5))/0x5+parseInt(_0x3172f8(0x129))/0x6*(parseInt(_0x3172f8(0xe6))/0x7)+-parseInt(_0x3172f8(0x125))/0x8+-parseInt(_0x3172f8(0xe2))/0x9+parseInt(_0x3172f8(0xfe))/0xa;if(_0x5011ef===_0xcfae6c)break;else _0x459d4e['push'](_0x459d4e['shift']());}catch(_0x6c3675){_0x459d4e['push'](_0x459d4e['shift']());}}}(a0_0x1def,0xdc8f3));import{app}from'../../scripts/app.js';import{api}from'../../scripts/api.js';import{ComfyWidgets}from'../../scripts/widgets.js';export function setupOutputPortSync(_0x29d75f,_0x8cb43){const _0x47b6f9=a0_0x5598;_0x29d75f[_0x47b6f9(0x12e)]['syncOutputPorts']=function(){const _0x515435=_0x47b6f9;if(!this['inputs']||!this['outputs'])return;const _0x596414=this['inputs'][_0x515435(0x14c)](_0x48de4b=>_0x48de4b['name'][_0x515435(0x10d)](_0x515435(0xfc))),_0x8552e=Math[_0x515435(0x115)](0x1,_0x596414[_0x515435(0xfa)]);while(this[_0x515435(0xe1)][_0x515435(0xfa)]>_0x8552e){this[_0x515435(0x140)](this[_0x515435(0xe1)][_0x515435(0xfa)]-0x1);}while(this[_0x515435(0xe1)][_0x515435(0xfa)]<_0x8552e){const _0x287f96=this[_0x515435(0xe1)]['length']+0x1;this['addOutput'](_0x515435(0x10c)+_0x287f96,'*');}for(let _0x118b1e=0x0;_0x118b1e<_0x8552e;_0x118b1e++){const _0x3d467b=_0x596414[_0x118b1e],_0x3c35d3=this[_0x515435(0xe1)][_0x118b1e];if(!_0x3c35d3)continue;let _0x2a269e='output_'+(_0x118b1e+0x1),_0x3def3c='*';if(_0x3d467b&&_0x3d467b[_0x515435(0xeb)]!==null){const _0x191d2e=_0x8cb43['graph'][_0x515435(0x127)][_0x3d467b[_0x515435(0xeb)]];if(_0x191d2e){const _0x4f395a=_0x8cb43[_0x515435(0x133)]['getNodeById'](_0x191d2e[_0x515435(0x13f)]);if(_0x4f395a){const _0xc1634b=_0x4f395a[_0x515435(0xe1)][_0x191d2e[_0x515435(0x141)]];if(_0xc1634b){const _0x47c92b=_0xc1634b[_0x515435(0xe9)],_0x1406b4=_0xc1634b[_0x515435(0x137)]||_0xc1634b[_0x515435(0xd6)];if(_0x47c92b!=='*')_0x3def3c=_0x47c92b,_0x2a269e=_0x3def3c;else _0x1406b4&&_0x1406b4!=='*'&&(_0x2a269e=_0x1406b4);}}}}if(_0x3c35d3[_0x515435(0xe9)]!==_0x3def3c||_0x3c35d3['label']!==_0x2a269e){if(_0x3c35d3['links']&&_0x3c35d3[_0x515435(0x127)][_0x515435(0xfa)]>0x0){const _0x4b5496=[];for(const _0x2a485f of _0x3c35d3[_0x515435(0x127)]){const _0x18a668=_0x8cb43['graph'][_0x515435(0x127)][_0x2a485f];if(!_0x18a668)continue;const _0x566c4f=_0x8cb43[_0x515435(0x133)]['getNodeById'](_0x18a668[_0x515435(0x12d)]);if(!_0x566c4f)continue;const _0x342d2e=_0x566c4f['inputs'][_0x18a668[_0x515435(0x121)]];if(!_0x342d2e)continue;if(_0x3def3c==='*')continue;if(_0x342d2e[_0x515435(0xe9)]==='*')continue;_0x342d2e[_0x515435(0xe9)]!==_0x3def3c&&_0x4b5496[_0x515435(0x101)](_0x2a485f);}for(const _0x2a410c of _0x4b5496){_0x8cb43[_0x515435(0x133)]['removeLink'](_0x2a410c);}}_0x3c35d3[_0x515435(0xe9)]=_0x3def3c,_0x3c35d3[_0x515435(0x137)]=_0x2a269e,_0x3c35d3[_0x515435(0xd6)]=_0x2a269e[_0x515435(0xda)]();}}};const _0x521dff=_0x29d75f[_0x47b6f9(0x12e)][_0x47b6f9(0xf7)];_0x29d75f[_0x47b6f9(0x12e)][_0x47b6f9(0xf7)]=function(){const _0x52db39=_0x47b6f9;_0x521dff&&_0x521dff[_0x52db39(0xea)](this,arguments),this[_0x52db39(0xf0)](),this['setSize'](this[_0x52db39(0x132)]()),this[_0x52db39(0xfd)](!![],!![]);};const _0xbca758=_0x29d75f['prototype']['onConnectionsChange'];_0x29d75f['prototype'][_0x47b6f9(0x120)]=function(_0x5ab250,_0x3edcdb,_0x35707f,_0x5dd7f8){const _0x515390=_0x47b6f9;_0xbca758&&_0xbca758[_0x515390(0xea)](this,arguments),setTimeout(()=>{const _0x3581c9=_0x515390;this[_0x3581c9(0xf0)](),this[_0x3581c9(0xfd)](!![],!![]);},0xa);};}function findTextWidgetInsertPosition(_0x271a8d){const _0x43662d=a0_0x5598,_0x33e93a=_0x271a8d[_0x43662d(0x14b)]?.[_0x43662d(0x14a)](_0x1013ca=>_0x1013ca[_0x43662d(0xd6)]==='▣\x20CANCEL');if(_0x33e93a)return _0x271a8d[_0x43662d(0x14b)][_0x43662d(0xe5)](_0x33e93a)+0x1;const _0x372d45=_0x271a8d[_0x43662d(0x14b)]?.[_0x43662d(0x14a)](_0x2e588c=>_0x2e588c[_0x43662d(0xd6)]===_0x43662d(0x143));if(_0x372d45)return _0x271a8d['widgets'][_0x43662d(0xe5)](_0x372d45)+0x1;return _0x271a8d[_0x43662d(0x14b)][_0x43662d(0xfa)];}function a0_0x1def(){const _0x40a25a=['ntm2ndm3nvP2y3DMDa','BNvTyMvY','B25oB2rLq3jLyxrLza','zMLSzw5HBwu','C3rYAw5NAwz5','BgvUz3rO','ugf1C2u','Aw5WDxrF','C2v0rgLYDhLdyw52yxm','mJe0mZa1ndbSweruvwm','B3b0Aw9UCW','C2vHCMnOugfYyw1Z','ChvZAa','l3zPzxC/','4PAJienbtKnfta','yxbWBgLJyxrPB24VANnVBG','w0ndtM90zxnDievYCM9YihbHCNnPBMCGy2XPChnWywnLihvYBdO','C3r5Bgu','Aw5WDxrfBa','x3nKChbWx2nHy2HL','Aw5JBhvKzxm','D2fYBG','ywXS','B3v0Chv0xW','C3rHCNrZv2L0Aa','x2nJBM90zxnFzNvSBf9PBwDZ','uhjLDMLLD05Vzgu','Aw1Hz2vjBMrLEa','Aw1Hz2veyxrH','y2nUB3rLCY5UB2rLx2v2zw50','xsbgywLSzwqGDg8GC2vUzcbHy3rPB246','ywrKv2LKz2v0','Bwf4','ChjLDMLLD190zxH0','C2XPy2u','xsbgywLSzwqGDg8GBg9HzcbPBwfNztOG','zMLSzw5HBwu9y2XPChnWywnLlw1HC2ST','AxnmAw5Rzwq','Aw1NCW','AxnFD2fPDgLUzW','y2fUy2vS','CgfYC2u','y2f0y2G','B25dB25Uzwn0Aw9UC0nOyw5Nzq','DgfYz2v0x3nSB3q','Aw5WDxrZ','Cgf1C2u','zMv0y2HbCgK','mtu3ntKZnNz5suveEq','x2nJBM90zxnFBgfZDf92ywXPzf9PBMrLEa','BgLUA3m','C3bSAwnL','ndHhCNLZBhG','q0noB3rLCY5qCMv2Awv3ugf1C2voB2rLCW','qw55uhjLDMLLDW','zMLUzeLUzgv4','DgfYz2v0x2LK','ChjVDg90ExbL','yNv0Dg9U','y2HLy2TFDgLTzxi','C3vIzM9SzgvY','y29TChv0zvnPEMu','z3jHCgG','BxvSDgLSAw5L','ugf1C2voB2rL','DgvTCa','BgfIzwW','yxbPvvjm','zM9YrwfJAa','y29TzNLdBgfZCW','uhjLDMLLDW','y29UDgLUDwu','Dg9tDhjPBMC','C3bSAxq','B3jPz2LUx2LK','CMvTB3zLt3v0Chv0','B3jPz2LUx3nSB3q','Aw1Hz2vZ','ywn0Aw9U','mtiZotm2CejJsMXc','ywrKrxzLBNrmAxn0zw5LCG','u1rssu5h','z2v0tM9Kzuj5swq','DMfSDwu','C2v0u2L6zq','zMLUza','D2LKz2v0CW','zMLSDgvY','BMfTzq','Aw50zxjYDxb0','4PA2ienptLrjtLvf','ue9tva','Dg9mB3DLCKnHC2u','z2v0','x3jLC3rVCMvFC3rHDgu','D2LKz2v0','zgLZCgXHEq','nM5mywnPwq','B25SB2fK','B3v0Chv0CW','mtu3nJGZmJrnternELK','CgfZCW','AgLKzgvU','Aw5KzxHpzG','nJCYmdK4z2LdquvT','C2L6zq','mtG5mtm5nLfIBfnYCG','DhLWzq','yxbWBhK','BgLUAW','CgXHy2vOB2XKzxiUCg5N','C3jJ','ChjVCgvYDgLLCW','m09jteHotq','C3LUy091Dhb1DfbVCNrZ','Dgv4Da','B25nB3vZzurVD24','x2nJBM90zxnFzNvSBf9PBwfNzxnFzgf0yq','BwfW'];a0_0x1def=function(){return _0x40a25a;};return a0_0x1def();}app['registerExtension']({'name':a0_0xd41398(0x12a),async 'nodeCreated'(_0x4e0230){const _0x4f312f=a0_0xd41398;_0x4e0230[_0x4f312f(0x13a)][_0x4f312f(0x109)](_0x4f312f(0x13b))&&(_0x4e0230['imageData']=[{'filename':_0x4f312f(0xec),'subfolder':'','type':_0x4f312f(0x136)}]);if(_0x4e0230[_0x4f312f(0x13a)][_0x4f312f(0x109)](_0x4f312f(0xfb))){addNativeControlPanel(_0x4e0230);const _0x2812ec=_0x4e0230[_0x4f312f(0x14b)]?.['find'](_0x5abe39=>_0x5abe39['name']===_0x4f312f(0x143));if(_0x2812ec){const _0x431794=_0x2812ec['callback'];_0x2812ec['callback']=function(){const _0x4bdd0c=_0x4f312f;_0x431794&&_0x431794[_0x4bdd0c(0xea)](this,arguments),updateButtonVisibility(_0x4e0230);};}_0x4e0230['setSize'](_0x4e0230['computeSize']());}if(_0x4e0230['comfyClass']===_0x4f312f(0x12b)){const _0x1ad8d8=_0x4e0230[_0x4f312f(0x14b)]?.[_0x4f312f(0x14a)](_0x5abbfe=>_0x5abbfe['name']===_0x4f312f(0x116));_0x1ad8d8&&(_0x1ad8d8[_0x4f312f(0xe9)]=_0x4f312f(0xe4),_0x1ad8d8['computeSize']=()=>[0x0,0x0]),_0x4e0230['setSize'](_0x4e0230['computeSize']());}},async 'loadedGraphNode'(_0x59f749){const _0x27fe21=a0_0xd41398;if(_0x59f749[_0x27fe21(0x13a)]['includes'](_0x27fe21(0xfb))){addNativeControlPanel(_0x59f749);if(_0x59f749[_0x27fe21(0x13a)]['includes'](_0x27fe21(0x13b))){const _0x985951=_0x59f749[_0x27fe21(0xf2)];_0x59f749['onMouseDown']=function(_0xf70baa,_0x30c9f1,_0x5f025c){const _0x2d3fc0=_0x27fe21,_0x2875eb=_0x985951?_0x985951[_0x2d3fc0(0xea)](this,arguments):undefined;if(this[_0x2d3fc0(0x11b)]&&this[_0x2d3fc0(0x11b)][_0x2d3fc0(0xfa)]>0x1){const _0x1ef045=_0x30c9f1[0x0],_0x1a0ca6=this[_0x2d3fc0(0xe7)][0x0];if(typeof this['imageIndex']!==_0x2d3fc0(0xf6))this[_0x2d3fc0(0x110)]=0x0;if(_0xf70baa[_0x2d3fc0(0x12f)]===0x0){if(_0x1ef045<_0x1a0ca6*0.25){if(this[_0x2d3fc0(0x110)]>0x0)this[_0x2d3fc0(0x110)]--;}else{if(_0x1ef045>_0x1a0ca6*0.75){if(this[_0x2d3fc0(0x110)]<this[_0x2d3fc0(0x11b)][_0x2d3fc0(0xfa)]-0x1)this[_0x2d3fc0(0x110)]++;}}}}return _0x2875eb;};}if(_0x59f749[_0x27fe21(0x13a)][_0x27fe21(0x109)](_0x27fe21(0x13b))){if(_0x59f749['properties']?.[_0x27fe21(0x108)]){_0x59f749[_0x27fe21(0x111)]=_0x59f749[_0x27fe21(0xee)][_0x27fe21(0x108)][_0x27fe21(0x142)]||_0x59f749[_0x27fe21(0x111)];const _0x950b1e=_0x59f749[_0x27fe21(0xee)]['_sdppp_cache'][_0x27fe21(0xf1)]||[];if(_0x950b1e[_0x27fe21(0xfa)]>0x0){const _0x291f0d='preview_text';_0x950b1e[_0x27fe21(0x139)]((_0x18a2c7,_0xd50dbc)=>{const _0x2bb6d3=_0x27fe21,_0x2d24e6=_0xd50dbc===0x0?_0x291f0d:_0x291f0d+'_'+_0xd50dbc;let _0x2badc0=_0x59f749[_0x2bb6d3(0x14b)][_0x2bb6d3(0x14a)](_0x3948bd=>_0x3948bd['name']===_0x2d24e6);if(!_0x2badc0){const _0x2ba73d=ComfyWidgets[_0x2bb6d3(0x146)](_0x59f749,_0x2d24e6,['STRING',{'multiline':!![]}],app);_0x2badc0=_0x2ba73d[_0x2bb6d3(0xdd)];const _0x5cd0c3=_0x59f749[_0x2bb6d3(0x14b)][_0x2bb6d3(0xe5)](_0x2badc0);_0x5cd0c3!==-0x1&&_0x59f749['widgets'][_0x2bb6d3(0x128)](_0x5cd0c3,0x1);const _0x32f1f0=findTextWidgetInsertPosition(_0x59f749);_0x59f749[_0x2bb6d3(0x14b)]['splice'](_0x32f1f0+_0xd50dbc,0x0,_0x2badc0);}_0x2badc0[_0x2bb6d3(0xe9)]=_0x2bb6d3(0xf1),_0x2badc0[_0x2bb6d3(0x148)]=_0x18a2c7,_0x2badc0['options']?_0x2badc0[_0x2bb6d3(0xff)]['multiline']=!![]:_0x2badc0[_0x2bb6d3(0xff)]={'multiline':!![]};});}}}updateButtonVisibility(_0x59f749);}},async 'setup'(){const _0x4467c9=a0_0xd41398;api[_0x4467c9(0x145)](_0x4467c9(0x112),async({detail:_0x3e13f1})=>{const _0x464dab=_0x4467c9,{node_id:_0x310c48,node_type:_0x4178f2,action:_0x27c3bf,data:_0x2c3575}=_0x3e13f1,_0x3817bc=app[_0x464dab(0x133)][_0x464dab(0x147)](_0x310c48);if(!_0x3817bc)return;switch(_0x4178f2){case'preview':handlePreviewData(_0x3817bc,_0x2c3575);break;case _0x464dab(0x123):_0x27c3bf===_0x464dab(0x123)&&enterPauseState(_0x3817bc);break;case'preview_pause':updateImageServiceState(_0x3817bc,_0x2c3575),updateTextServiceWidgets(_0x3817bc,_0x2c3575&&_0x2c3575[_0x464dab(0xf1)]?_0x2c3575[_0x464dab(0xf1)]:[]);_0x27c3bf==='pause'&&enterPauseState(_0x3817bc);break;}});}});function handlePreviewData(_0x2cbd0,_0x72b030){const _0x2c47ec=a0_0xd41398;updateImageServiceState(_0x2cbd0,_0x72b030),updateTextServiceWidgets(_0x2cbd0,_0x72b030&&_0x72b030[_0x2c47ec(0xf1)]?_0x72b030['text']:[]);}function a0_0x5598(_0x141c1c,_0x1f0fb6){_0x141c1c=_0x141c1c-0xd6;const _0x1def77=a0_0x1def();let _0x55981f=_0x1def77[_0x141c1c];if(a0_0x5598['xiowxp']===undefined){var _0x3e4fdc=function(_0x45031d){const _0x41f34d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x29d75f='',_0x8cb43='';for(let _0x521dff=0x0,_0xbca758,_0x596414,_0x8552e=0x0;_0x596414=_0x45031d['charAt'](_0x8552e++);~_0x596414&&(_0xbca758=_0x521dff%0x4?_0xbca758*0x40+_0x596414:_0x596414,_0x521dff++%0x4)?_0x29d75f+=String['fromCharCode'](0xff&_0xbca758>>(-0x2*_0x521dff&0x6)):0x0){_0x596414=_0x41f34d['indexOf'](_0x596414);}for(let _0x48de4b=0x0,_0x287f96=_0x29d75f['length'];_0x48de4b<_0x287f96;_0x48de4b++){_0x8cb43+='%'+('00'+_0x29d75f['charCodeAt'](_0x48de4b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x8cb43);};a0_0x5598['ICCZbH']=_0x3e4fdc,a0_0x5598['OaloaA']={},a0_0x5598['xiowxp']=!![];}const _0x1815e2=_0x1def77[0x0],_0x266078=_0x141c1c+_0x1815e2,_0x131076=a0_0x5598['OaloaA'][_0x266078];return!_0x131076?(_0x55981f=a0_0x5598['ICCZbH'](_0x55981f),a0_0x5598['OaloaA'][_0x266078]=_0x55981f):_0x55981f=_0x131076,_0x55981f;}async function renderImageMode(_0x345686,_0x56d459){const _0x517cce=a0_0xd41398;if(!_0x56d459||_0x56d459[_0x517cce(0xfa)]===0x0){_0x345686[_0x517cce(0x11b)]=null,_0x345686[_0x517cce(0x10e)]=null;return;}const _0xdd6507=_0x56d459['map'](_0x38ec90=>{const _0x4a4138=_0x517cce,_0x2a7a8d=new URLSearchParams({'filename':_0x38ec90[_0x4a4138(0xf8)],'type':_0x38ec90['type'],'subfolder':_0x38ec90[_0x4a4138(0x131)]}),_0x4b186b=api[_0x4a4138(0x138)](_0x4a4138(0x102)+_0x2a7a8d[_0x4a4138(0x13d)]());return new Promise(_0x3fc5ce=>{const _0x1cbb66=_0x4a4138,_0xdec675=new Image();_0xdec675[_0x1cbb66(0xe0)]=()=>_0x3fc5ce(_0xdec675),_0xdec675['onerror']=()=>{const _0x2c75ff=_0x1cbb66;console[_0x2c75ff(0x10a)]('['+(_0x345686[_0x2c75ff(0x13a)]||_0x2c75ff(0x10f))+_0x2c75ff(0x118)+_0x38ec90[_0x2c75ff(0xf8)]),_0x3fc5ce(null);},_0xdec675[_0x1cbb66(0xed)]=_0x4b186b;});}),_0x2cbfdc=(await Promise[_0x517cce(0x10b)](_0xdd6507))[_0x517cce(0x14c)](_0x428772=>_0x428772!==null);_0x2cbfdc['length']>0x0&&(_0x345686['imgs']=_0x2cbfdc,_0x345686[_0x517cce(0x10e)]=_0x2cbfdc[_0x517cce(0x117)](),_0x56d459&&_0x56d459[_0x517cce(0xfa)]>0x0&&(_0x345686[_0x517cce(0xf3)]=JSON[_0x517cce(0x11e)](JSON[_0x517cce(0xf9)](_0x56d459))));}function getControlActionControl(_0x36cf97){const _0x4c109e=a0_0xd41398,_0x5e2ba3=_0x36cf97[_0x4c109e(0x122)]?.['findIndex'](_0x561503=>_0x561503[_0x4c109e(0xd6)]==='action');if(_0x5e2ba3===-0x1||_0x5e2ba3===undefined)return{'isLinked':![]};const _0x54eabd=_0x36cf97[_0x4c109e(0x122)][_0x5e2ba3],_0xaca4d9=_0x36cf97['widgets']?.['find'](_0x2d981d=>_0x2d981d['name']===_0x4c109e(0x143));if(_0x54eabd[_0x4c109e(0xeb)])return{'isLinked':!![],'link':_0x54eabd[_0x4c109e(0xeb)],'input':_0x54eabd};else{if(_0xaca4d9)return{'isLinked':![],'widget':_0xaca4d9};}return{'isLinked':![]};}function startAutoResumeCheck(_0x39f5f3){const _0x2ce250=a0_0xd41398;if(_0x39f5f3[_0x2ce250(0x130)])clearInterval(_0x39f5f3[_0x2ce250(0x130)]);_0x39f5f3[_0x2ce250(0x130)]=setInterval(()=>{const _0x1445fe=_0x2ce250;if(!_0x39f5f3[_0x1445fe(0x11c)]){clearInterval(_0x39f5f3[_0x1445fe(0x130)]),_0x39f5f3[_0x1445fe(0x130)]=null,_0x39f5f3[_0x1445fe(0x10e)]=null;return;}if(_0x39f5f3[_0x1445fe(0x11b)]&&_0x39f5f3[_0x1445fe(0x11b)][_0x1445fe(0xfa)]>0x0){_0x39f5f3[_0x1445fe(0x10e)]&&_0x39f5f3[_0x1445fe(0x11b)][_0x1445fe(0xfa)]===_0x39f5f3[_0x1445fe(0x10e)][_0x1445fe(0xfa)]&&(typeof _0x39f5f3[_0x1445fe(0x110)]===_0x1445fe(0xf6)&&(_0x39f5f3[_0x1445fe(0x126)]=_0x39f5f3['imageIndex']));for(let _0x21b024=0x0;_0x21b024<_0x39f5f3[_0x1445fe(0x11b)][_0x1445fe(0xfa)];_0x21b024++){const _0x45e493=_0x39f5f3[_0x1445fe(0x11b)][_0x21b024];if(_0x45e493&&_0x45e493[_0x1445fe(0xed)]&&_0x45e493[_0x1445fe(0xed)][_0x1445fe(0x109)](_0x1445fe(0x119)))try{let _0x5e46c8=_0x21b024;if(_0x39f5f3[_0x1445fe(0x10e)]&&_0x39f5f3[_0x1445fe(0x10e)][_0x1445fe(0xfa)]>_0x39f5f3['imgs']['length']){if(typeof _0x39f5f3['_ccnotes_last_valid_index']===_0x1445fe(0xf6))_0x5e46c8=_0x39f5f3['_ccnotes_last_valid_index'];else typeof _0x39f5f3[_0x1445fe(0x110)]===_0x1445fe(0xf6)?_0x5e46c8=_0x39f5f3['imageIndex']:_0x5e46c8=0x0;}const _0x4768be=new URL(_0x45e493['src']),_0x11f1fd=_0x4768be[_0x1445fe(0x100)][_0x1445fe(0xdb)](_0x1445fe(0xf8)),_0x3eb933=_0x4768be[_0x1445fe(0x100)]['get'](_0x1445fe(0x131)),_0x1a6673=_0x4768be[_0x1445fe(0x100)][_0x1445fe(0xdb)](_0x1445fe(0xe9));if(_0x11f1fd&&_0x39f5f3[_0x1445fe(0xf3)]){const _0x34dc7d=_0x39f5f3[_0x1445fe(0xf3)][_0x5e46c8];if(!_0x34dc7d||_0x34dc7d[_0x1445fe(0xf8)]!==_0x11f1fd){if(!_0x39f5f3[_0x1445fe(0xf3)][_0x5e46c8])_0x39f5f3['_ccnotes_full_images_data'][_0x5e46c8]={};_0x39f5f3['_ccnotes_full_images_data'][_0x5e46c8]={'filename':_0x11f1fd,'subfolder':_0x3eb933,'type':_0x1a6673},_0x39f5f3[_0x1445fe(0x10e)]&&_0x5e46c8<_0x39f5f3[_0x1445fe(0x10e)][_0x1445fe(0xfa)]&&(_0x39f5f3[_0x1445fe(0x10e)][_0x5e46c8]=_0x45e493);}}}catch(_0x13393e){console[_0x1445fe(0x10a)](_0x1445fe(0x105),_0x13393e);}}}_0x39f5f3[_0x1445fe(0x10e)]&&_0x39f5f3[_0x1445fe(0x10e)]['length']>0x1&&(_0x39f5f3['imgs']&&_0x39f5f3[_0x1445fe(0x11b)]['length']<_0x39f5f3[_0x1445fe(0x10e)][_0x1445fe(0xfa)]&&(_0x39f5f3[_0x1445fe(0x11b)]=_0x39f5f3[_0x1445fe(0x10e)][_0x1445fe(0x117)](),app[_0x1445fe(0x133)][_0x1445fe(0xfd)](!![],![])));const _0x5def19=getControlActionValue(_0x39f5f3),_0x1f48a8=String(_0x5def19)[_0x1445fe(0xda)]();if(_0x1f48a8['includes']('pass'))sendAction(_0x39f5f3,_0x1445fe(0xd8));else _0x1f48a8['includes']('cancel')&&(api['interrupt'](),sendAction(_0x39f5f3,_0x1445fe(0x103)));},0xc8);}function getControlActionValue(_0x1ef688){const _0x2d1fde=a0_0xd41398,_0x51d643=getControlActionControl(_0x1ef688);if(_0x51d643[_0x2d1fde(0x11a)]){const _0x19b829=app[_0x2d1fde(0x133)][_0x2d1fde(0x127)][_0x51d643[_0x2d1fde(0xeb)]];if(!_0x19b829)return _0x2d1fde(0x123);const _0x21671f=app[_0x2d1fde(0x133)][_0x2d1fde(0x147)](_0x19b829[_0x2d1fde(0x13f)]);if(!_0x21671f)return _0x2d1fde(0x123);if(_0x21671f[_0x2d1fde(0x14b)]&&_0x21671f[_0x2d1fde(0x14b)]['length']>0x0)return String(_0x21671f['widgets'][0x0][_0x2d1fde(0x148)]);}else{if(_0x51d643[_0x2d1fde(0xdd)])return String(_0x51d643[_0x2d1fde(0xdd)][_0x2d1fde(0x148)]);}return _0x2d1fde(0x123);}function addNativeControlPanel(_0x520411){updateButtonVisibility(_0x520411);}function updateButtonVisibility(_0x559962){const _0x2e10f5=a0_0xd41398,_0x517216=_0x559962[_0x2e10f5(0x14b)]?.['find'](_0x5661c4=>_0x5661c4['name']==='action');if(!_0x517216)return;const _0x247034=_0x517216[_0x2e10f5(0x148)],_0xa0f6ed=_0x247034===_0x2e10f5(0xfb),_0x5813a4=_0x559962[_0x2e10f5(0x14b)]?.[_0x2e10f5(0x14a)](_0x1d3e74=>_0x1d3e74['name']==='▶\x20CONTINUE'),_0x3900cb=_0x559962[_0x2e10f5(0x14b)]?.[_0x2e10f5(0x14a)](_0x14d844=>_0x14d844['name']==='▣\x20CANCEL'),_0xf8d9cb=_0x5813a4&&_0x3900cb;if(_0xa0f6ed&&!_0xf8d9cb){const _0x3af9e3={'serialize':![]},_0x490685=_0x559962[_0x2e10f5(0x114)](_0x2e10f5(0x12f),_0x2e10f5(0x13c),null,()=>sendAction(_0x559962,_0x2e10f5(0xd8)),_0x3af9e3);_0x490685[_0x2e10f5(0xd6)]=_0x2e10f5(0xd8);const _0x205f32=_0x559962['addWidget'](_0x2e10f5(0x12f),_0x2e10f5(0x11d),null,()=>{const _0x4dfa4e=_0x2e10f5;api[_0x4dfa4e(0xd7)](),sendAction(_0x559962,'▣\x20CANCEL');},_0x3af9e3);_0x205f32[_0x2e10f5(0xd6)]=_0x2e10f5(0x103);const _0x2312ea=_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0x12c)](_0x5dd517=>_0x5dd517[_0x2e10f5(0xd6)]===_0x2e10f5(0x143));if(_0x2312ea!==-0x1){const _0x2b6971=_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0xe5)](_0x490685),_0x384b87=_0x559962['widgets'][_0x2e10f5(0xe5)](_0x205f32);if(_0x2b6971!==-0x1)_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0x128)](_0x2b6971,0x1);if(_0x384b87!==-0x1){const _0xa26a76=_0x2b6971!==-0x1&&_0x384b87>_0x2b6971?_0x384b87-0x1:_0x384b87;_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0x128)](_0xa26a76,0x1);}_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0x128)](_0x2312ea+0x1,0x0,_0x490685,_0x205f32);}_0x559962[_0x2e10f5(0x149)](_0x559962['computeSize']()),app[_0x2e10f5(0x133)]&&app[_0x2e10f5(0x133)]['setDirtyCanvas'](!![],!![]);}else{if(!_0xa0f6ed&&_0xf8d9cb){const _0x223db4=_0x559962['widgets'][_0x2e10f5(0xe5)](_0x5813a4),_0x559d95=_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0xe5)](_0x3900cb);_0x223db4!==-0x1&&_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0x128)](_0x223db4,0x1);if(_0x559d95!==-0x1){const _0x2473d0=_0x223db4!==-0x1&&_0x559d95>_0x223db4?_0x559d95-0x1:_0x559d95;_0x559962[_0x2e10f5(0x14b)][_0x2e10f5(0x128)](_0x2473d0,0x1);}_0x559962['setSize'](_0x559962[_0x2e10f5(0x132)]()),app[_0x2e10f5(0x133)]&&app[_0x2e10f5(0x133)][_0x2e10f5(0xfd)](!![],!![]);}}}function sendAction(_0x1356f5,_0x56a12d){const _0x20c9ea=a0_0xd41398;_0x1356f5[_0x20c9ea(0x11c)]=![];_0x1356f5[_0x20c9ea(0x130)]&&(clearInterval(_0x1356f5['check_timer']),_0x1356f5[_0x20c9ea(0x130)]=null);const _0x3b2589=_0x56a12d[_0x20c9ea(0xda)](),_0x17899f=_0x20c9ea(0x116),_0x4444f7=_0x1356f5['widgets']?.['filter'](_0x40601a=>_0x40601a[_0x20c9ea(0xd6)]===_0x17899f||_0x40601a[_0x20c9ea(0xd6)][_0x20c9ea(0x10d)](_0x17899f+'_'));_0x4444f7['sort']((_0x566eac,_0x25212c)=>{const _0x30602b=_0x20c9ea;if(_0x566eac['name']===_0x17899f)return-0x1;if(_0x25212c[_0x30602b(0xd6)]===_0x17899f)return 0x1;const _0x18c517=parseInt(_0x566eac[_0x30602b(0xd6)][_0x30602b(0x13e)]('_')[0x2]||0x0),_0x27835e=parseInt(_0x25212c[_0x30602b(0xd6)][_0x30602b(0x13e)]('_')[0x2]||0x0);return _0x18c517-_0x27835e;});let _0x14f5f3=[];_0x4444f7&&_0x4444f7[_0x20c9ea(0xfa)]>0x0&&(_0x14f5f3=_0x4444f7[_0x20c9ea(0xf4)](_0x4d9af0=>_0x4d9af0[_0x20c9ea(0x148)]));if(_0x3b2589[_0x20c9ea(0x109)](_0x20c9ea(0xe3))||_0x3b2589['includes'](_0x20c9ea(0x13c))||_0x3b2589[_0x20c9ea(0x109)](_0x20c9ea(0x11d))){const _0xca9fd6=getControlActionControl(_0x1356f5),_0x49e130=_0x1356f5[_0x20c9ea(0xdc)]!==undefined?_0x1356f5['_restore_state']:_0x20c9ea(0xfb);if(_0xca9fd6[_0x20c9ea(0x11a)]&&_0xca9fd6['link']){const _0x5d9989=app[_0x20c9ea(0x133)][_0x20c9ea(0x127)][_0xca9fd6['link']],_0x2eb325=app[_0x20c9ea(0x133)]['getNodeById'](_0x5d9989[_0x20c9ea(0x13f)]);if(_0x2eb325&&_0x2eb325[_0x20c9ea(0x14b)]&&_0x2eb325[_0x20c9ea(0x14b)][_0x20c9ea(0xfa)]>0x0){const _0x5e2756=_0x2eb325[_0x20c9ea(0x14b)][0x0];_0x5e2756[_0x20c9ea(0x148)]!==_0x49e130&&(_0x5e2756[_0x20c9ea(0x148)]=_0x49e130,_0x2eb325[_0x20c9ea(0xfd)](!![],!![]));}}else _0xca9fd6[_0x20c9ea(0xdd)]&&(_0xca9fd6[_0x20c9ea(0xdd)][_0x20c9ea(0x148)]=_0x49e130,_0x1356f5[_0x20c9ea(0xfd)](!![],!![]));setTimeout(()=>{updateButtonVisibility(_0x1356f5);},0x1);}let _0x90854f=_0x20c9ea(0x13c);if(_0x3b2589['includes']('cancel'))_0x90854f=_0x20c9ea(0x11d);const _0xfa263d={'node_id':_0x1356f5['id'],'action':_0x90854f,'edited_text':_0x14f5f3,'images':_0x1356f5[_0x20c9ea(0xf3)]};api[_0x20c9ea(0x124)]('/ccnotes/resume_pause',{'method':_0x20c9ea(0xd9),'headers':{'Content-Type':_0x20c9ea(0x104)},'body':JSON['stringify'](_0xfa263d)})[_0x20c9ea(0x11f)](_0x3e3a2b=>{const _0x1f9492=_0x20c9ea;console['error']('['+(_0x1356f5[_0x1f9492(0x13a)]||_0x1f9492(0x135))+_0x1f9492(0x113),_0x3e3a2b);});}function updateTextServiceWidgets(_0x118b7f,_0x119100){const _0x48a82f=a0_0xd41398,_0x2f3c00=_0x48a82f(0x116);_0x119100=_0x119100||[];const _0xda7bbd=_0x118b7f['widgets'][_0x48a82f(0x14c)](_0xd4a13e=>_0xd4a13e[_0x48a82f(0xd6)]===_0x2f3c00||_0xd4a13e[_0x48a82f(0xd6)][_0x48a82f(0x10d)](_0x2f3c00+'_'));_0xda7bbd['forEach'](_0x4fc4f3=>{const _0x5d23dc=_0x48a82f;_0x4fc4f3['type']=_0x5d23dc(0xe4),_0x4fc4f3[_0x5d23dc(0x132)]=()=>[0x0,0x0],_0x4fc4f3[_0x5d23dc(0x148)]='';}),_0x119100[_0x48a82f(0xfa)]>0x0&&_0x119100[_0x48a82f(0x139)]((_0x7623fb,_0x392a78)=>{const _0x26ef8b=_0x48a82f,_0x1904c7=_0x392a78===0x0?_0x2f3c00:_0x2f3c00+'_'+_0x392a78;let _0x54f7cd=_0x118b7f[_0x26ef8b(0x14b)][_0x26ef8b(0x14a)](_0x10e7f4=>_0x10e7f4[_0x26ef8b(0xd6)]===_0x1904c7);if(!_0x54f7cd){const _0xa9bbf8=ComfyWidgets[_0x26ef8b(0x146)](_0x118b7f,_0x1904c7,[_0x26ef8b(0x146),{'multiline':!![]}],app);_0x54f7cd=_0xa9bbf8[_0x26ef8b(0xdd)];const _0x1b4936=_0x118b7f['widgets'][_0x26ef8b(0xe5)](_0x54f7cd);if(_0x1b4936!==-0x1){_0x118b7f[_0x26ef8b(0x14b)][_0x26ef8b(0x128)](_0x1b4936,0x1);let _0x463345=findTextWidgetInsertPosition(_0x118b7f);const _0x5635ba=_0x118b7f[_0x26ef8b(0x14b)]['findLastIndex'](_0x162e72=>_0x162e72['name'][_0x26ef8b(0x10d)](_0x2f3c00));_0x5635ba!==-0x1&&_0x5635ba>=_0x463345&&(_0x463345=_0x5635ba+0x1),_0x118b7f[_0x26ef8b(0x14b)][_0x26ef8b(0x128)](_0x463345,0x0,_0x54f7cd);}}_0x54f7cd[_0x26ef8b(0xe9)]='text',_0x54f7cd[_0x26ef8b(0x148)]=_0x7623fb,_0x54f7cd[_0x26ef8b(0x132)]=function(_0x24deb7){const _0x21f12c=_0x26ef8b,_0xd3003d=0x21,_0x2e8231=0x60,_0x2fac8e=0x2,_0x1c8948=0xc,_0x39b3dc=(this['value']||'')[_0x21f12c(0x13e)]('\x0a')[_0x21f12c(0xfa)],_0x1a1e67=_0x39b3dc*_0x1c8948+_0x2fac8e*0x3;return[_0x24deb7,Math[_0x21f12c(0x115)](_0xd3003d,Math['min'](_0x1a1e67,_0x2e8231))];},_0x54f7cd[_0x26ef8b(0xff)]?_0x54f7cd[_0x26ef8b(0xff)][_0x26ef8b(0x134)]=!![]:_0x54f7cd['options']={'multiline':!![]},_0x54f7cd['inputEl']&&(_0x54f7cd[_0x26ef8b(0x107)][_0x26ef8b(0x106)][_0x26ef8b(0xde)]='',_0x54f7cd['inputEl']['readOnly']=![]);}),setTimeout(()=>{const _0x261065=_0x48a82f;app[_0x261065(0x133)][_0x261065(0xfd)](!![],![]);},0x1);}function updateImageServiceState(_0x1aed17,_0x481a21){const _0x97e6f9=a0_0xd41398;_0x481a21&&_0x481a21['images']&&_0x481a21[_0x97e6f9(0x142)][_0x97e6f9(0xfa)]>0x0?(_0x1aed17[_0x97e6f9(0x111)]=_0x481a21[_0x97e6f9(0x142)],renderImageMode(_0x1aed17,_0x481a21[_0x97e6f9(0x142)]),!_0x1aed17[_0x97e6f9(0xee)][_0x97e6f9(0x108)]&&(_0x1aed17[_0x97e6f9(0xee)][_0x97e6f9(0x108)]={}),_0x1aed17[_0x97e6f9(0xee)][_0x97e6f9(0x108)][_0x97e6f9(0x142)]=_0x481a21[_0x97e6f9(0x142)],_0x1aed17[_0x97e6f9(0xee)][_0x97e6f9(0x108)][_0x97e6f9(0xf1)]=_0x481a21[_0x97e6f9(0xf1)]):(_0x1aed17[_0x97e6f9(0x11b)]=null,_0x1aed17['imageData']=null,_0x1aed17[_0x97e6f9(0xee)]['_sdppp_cache']&&delete _0x1aed17[_0x97e6f9(0xee)][_0x97e6f9(0x108)]);}function enterPauseState(_0x4d4f21){const _0x219e76=a0_0xd41398,_0x5582ab=getControlActionControl(_0x4d4f21);if(_0x5582ab[_0x219e76(0x11a)]&&_0x5582ab[_0x219e76(0xeb)]){const _0x1310cf=app['graph']['links'][_0x5582ab[_0x219e76(0xeb)]],_0x37f074=app['graph'][_0x219e76(0x147)](_0x1310cf['origin_id']);_0x37f074&&_0x37f074[_0x219e76(0x14b)]&&_0x37f074['widgets'][_0x219e76(0xfa)]>0x0&&(_0x4d4f21[_0x219e76(0xdc)]=_0x37f074[_0x219e76(0x14b)][0x0]['value']);}else _0x5582ab[_0x219e76(0xdd)]?_0x4d4f21[_0x219e76(0xdc)]=_0x5582ab[_0x219e76(0xdd)][_0x219e76(0x148)]:_0x4d4f21['_restore_state']='Pause';_0x4d4f21[_0x219e76(0x11c)]=!![],startAutoResumeCheck(_0x4d4f21);}