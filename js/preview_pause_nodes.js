(function(_0x58947b,_0x5ca655){const _0x1fd376=a0_0x24ad,_0x28dfff=_0x58947b();while(!![]){try{const _0x11af24=parseInt(_0x1fd376(0x208))/0x1+parseInt(_0x1fd376(0x201))/0x2*(parseInt(_0x1fd376(0x1d9))/0x3)+parseInt(_0x1fd376(0x200))/0x4*(parseInt(_0x1fd376(0x1ca))/0x5)+parseInt(_0x1fd376(0x1f7))/0x6+-parseInt(_0x1fd376(0x1c4))/0x7*(parseInt(_0x1fd376(0x1bd))/0x8)+parseInt(_0x1fd376(0x1a7))/0x9+parseInt(_0x1fd376(0x1c0))/0xa*(-parseInt(_0x1fd376(0x1df))/0xb);if(_0x11af24===_0x5ca655)break;else _0x28dfff['push'](_0x28dfff['shift']());}catch(_0x426e89){_0x28dfff['push'](_0x28dfff['shift']());}}}(a0_0x561f,0x57fe2));import{app}from'../../scripts/app.js';function a0_0x561f(){const _0xe8a444=['ywrKt3v0Chv0','DhLWzq','C2v0u2L6zq','BwfW','yxbPvvjm','odbfwwfcsg4','Aw1Hz2vjBMrLEa','B3jPz2LUx2LK','xsbgywLSzwqGDg8GC2vUzcbHy3rPB246','y2f0y2G','qw55uhjLDMLLDW','C3bSAwnL','C29YDa','ChjLDMLLD190zxH0','ugf1C2voB2rL','BwLU','ChjVDg90ExbL','C2XPy2u','DgfYz2v0x3nSB3q','BxvSDgLSAw5L','m2req211ua','zMLSDgvY','B25oB2rLq3jLyxrLza','xsbgywLSzwqGDg8GBg9HzcbPBwfNztOG','z2v0tM9Kzuj5swq','x3nKChbWx2nHy2HL','mJe5otG5D0vyy1fI','Aw1Hz2vZ','BNvTyMvY','C3rHCNrZv2L0Aa','l2nJBM90zxmVCMvZDw1Lx3bHDxnL','w0ndtM90zxnDievYCM9YihbHCNnPBMCGy2XPChnWywnLihvYBdO','AxnFD2fPDgLUzW','D2fYBG','ywrKrxzLBNrmAxn0zw5LCG','4PAJienbtKnfta','z3jHCgG','B25nB3vZzurVD24','AxnmAw5Rzwq','zM9YrwfJAa','z2v0','zMLUza','DMfSDwu','Aw5WDxrfBa','uhjLDMLLDW','Cgf1C2u','y2fUy2vS','zMLUzeLUzgv4','C2L6zq','yxbWBhK','ndmZnJaYr2X3yuPO','x2nJBM90zxnFzNvSBf9PBwfNzxnFzgf0yq','ywrKv2LKz2v0','B3b0Aw9UCW','BMfTzq','CgfYC2u','ugf1C2u','ywXS','Aw5JBhvKzxm','mtu0mtzSzxj1rMy','otmYnJqYqvLPzKTV','x3jLC3rVCMvFC3rHDgu','ChjLDMLLD19WyxvZzq','ChjVCgvYDgLLCW','B3jPz2LUx3nSB3q','C3vIzM9SzgvY','zMv0y2HbCgK','nJC3ntG0CLbjreXP','BgvUz3rO','y2fSBgjHy2S','BgLUAW','C3r5Bgu','zMLSzw5HBwu','Dgv4Da','C2vHCMnOugfYyw1Z','B25dB25Uzwn0Aw9UC0nOyw5Nzq','B25SB2fK','u1rssu5h','yNv0Dg9U','zMLUzeXHC3rjBMrLEa','CMvTB3zLt3v0Chv0','DgvTCa','Dg9mB3DLCKnHC2u','B3v0Chv0xW','ue9tva','CMvHze9UBhK','ywn0Aw9U','C3LUy091Dhb1DfbVCNrZ','B3v0Chv0CW','B25LCNjVCG','Aw5WDxrZ','ndCXotyZnMDWswHQCW','zgLZCgXHEq','Aw1Hz2veyxrH','y2HLy2TFDgLTzxi','y2nUB3rLCY5UB2rLx2v2zw50','Aw1NCW','Aw5KzxHpzG','BgLUA3m','uhjLDMLLD05Vzgu','x2nJBM90zxnFBgfZDf92ywXPzf9PBMrLEa','y29TChv0zvnPEMu','Bwf4','y29TzNLdBgfZCW','4PA2ienptLrjtLvf','l3zPzxC/','C3bSAxq','C2v0rgLYDhLdyw52yxm','D2LKz2v0','x2nJBM90zxnFzNvSBf9PBwDZ','zMLSzw5HBwu9y2XPChnWywnLlw1HC2ST','AgLKzgvU','BgfIzwW','ndK1mti4rvDLwgD6','zxjYB3i','C3jJ','nJKWEwDOr0zp','CgfZCW','y29UDgLUDwu','D2LKz2v0CW','n3P3qxLUDW'];a0_0x561f=function(){return _0xe8a444;};return a0_0x561f();}import{api}from'../../scripts/api.js';import{ComfyWidgets}from'../../scripts/widgets.js';export function setupOutputPortSync(_0x429280,_0x1dc955){const _0x2bc0cd=a0_0x24ad;_0x429280[_0x2bc0cd(0x1d5)][_0x2bc0cd(0x1a3)]=function(){const _0x3d7797=_0x2bc0cd;if(!this['inputs']||!this[_0x3d7797(0x1a4)])return;const _0x483e99=this[_0x3d7797(0x1a6)][_0x3d7797(0x1da)](_0x204a49=>_0x204a49[_0x3d7797(0x1fb)][_0x3d7797(0x1e2)]('input_')),_0x350999=Math['max'](0x1,_0x483e99[_0x3d7797(0x209)]);while(this[_0x3d7797(0x1a4)][_0x3d7797(0x209)]>_0x350999){this[_0x3d7797(0x215)](this[_0x3d7797(0x1a4)]['length']-0x1);}while(this['outputs'][_0x3d7797(0x209)]<_0x350999){const _0x18c1d3=this[_0x3d7797(0x1a4)][_0x3d7797(0x209)]+0x1;this[_0x3d7797(0x1c5)](_0x3d7797(0x218)+_0x18c1d3,'*');}for(let _0x40216e=0x0;_0x40216e<_0x350999;_0x40216e++){const _0x348365=_0x483e99[_0x40216e],_0x59cef9=this[_0x3d7797(0x1a4)][_0x40216e];if(!_0x59cef9)continue;let _0x39487a=_0x3d7797(0x218)+(_0x40216e+0x1),_0xf17b75='*';if(_0x348365&&_0x348365['link']!==null){const _0x4441cb=_0x1dc955[_0x3d7797(0x1e9)]['links'][_0x348365[_0x3d7797(0x20b)]];if(_0x4441cb){const _0x481e92=_0x1dc955[_0x3d7797(0x1e9)][_0x3d7797(0x1dd)](_0x4441cb[_0x3d7797(0x1cc)]);if(_0x481e92){const _0x30b184=_0x481e92[_0x3d7797(0x1a4)][_0x4441cb[_0x3d7797(0x205)]];if(_0x30b184){const _0x218713=_0x30b184[_0x3d7797(0x1c6)],_0x16a01d=_0x30b184[_0x3d7797(0x1bc)]||_0x30b184[_0x3d7797(0x1fb)];if(_0x218713!=='*')_0xf17b75=_0x218713,_0x39487a=_0xf17b75;else _0x16a01d&&_0x16a01d!=='*'&&(_0x39487a=_0x16a01d);}}}}if(_0x59cef9['type']!==_0xf17b75||_0x59cef9[_0x3d7797(0x1bc)]!==_0x39487a){if(_0x59cef9['links']&&_0x59cef9[_0x3d7797(0x1ae)]['length']>0x0){const _0x830aaa=[];for(const _0x35b15e of _0x59cef9[_0x3d7797(0x1ae)]){const _0x9997a7=_0x1dc955[_0x3d7797(0x1e9)][_0x3d7797(0x1ae)][_0x35b15e];if(!_0x9997a7)continue;const _0x2e88ad=_0x1dc955['graph'][_0x3d7797(0x1dd)](_0x9997a7['target_id']);if(!_0x2e88ad)continue;const _0x2cdf7f=_0x2e88ad[_0x3d7797(0x1a6)][_0x9997a7[_0x3d7797(0x1d7)]];if(!_0x2cdf7f)continue;if(_0xf17b75==='*')continue;if(_0x2cdf7f[_0x3d7797(0x1c6)]==='*')continue;_0x2cdf7f['type']!==_0xf17b75&&_0x830aaa['push'](_0x35b15e);}for(const _0x5c8584 of _0x830aaa){_0x1dc955[_0x3d7797(0x1e9)]['removeLink'](_0x5c8584);}}_0x59cef9[_0x3d7797(0x1c6)]=_0xf17b75,_0x59cef9[_0x3d7797(0x1bc)]=_0x39487a,_0x59cef9[_0x3d7797(0x1fb)]=_0x39487a[_0x3d7797(0x217)]();}}};const _0x53d085=_0x429280[_0x2bc0cd(0x1d5)][_0x2bc0cd(0x1db)];_0x429280[_0x2bc0cd(0x1d5)][_0x2bc0cd(0x1db)]=function(){const _0x3e2880=_0x2bc0cd;_0x53d085&&_0x53d085[_0x3e2880(0x1f6)](this,arguments),this[_0x3e2880(0x1a3)](),this[_0x3e2880(0x1c7)](this['computeSize']()),this[_0x3e2880(0x1b7)](!![],!![]);};const _0x4319f4=_0x429280[_0x2bc0cd(0x1d5)][_0x2bc0cd(0x210)];_0x429280[_0x2bc0cd(0x1d5)][_0x2bc0cd(0x210)]=function(_0x3d863c,_0x4a2d4a,_0x397e70,_0x39675b){const _0x36b9fa=_0x2bc0cd;_0x4319f4&&_0x4319f4[_0x36b9fa(0x1f6)](this,arguments),setTimeout(()=>{const _0x57c250=_0x36b9fa;this[_0x57c250(0x1a3)](),this[_0x57c250(0x1b7)](!![],!![]);},0xa);};}function findTextWidgetInsertPosition(_0x42b275){const _0xdc8b01=a0_0x24ad,_0x4938c4=_0x42b275['widgets']?.[_0xdc8b01(0x1ee)](_0xdd273b=>_0xdd273b[_0xdc8b01(0x1fb)]==='▣\x20CANCEL');if(_0x4938c4)return _0x42b275['widgets'][_0xdc8b01(0x1ad)](_0x4938c4)+0x1;const _0x19c26d=_0x42b275[_0xdc8b01(0x1c3)]?.['find'](_0x533689=>_0x533689[_0xdc8b01(0x1fb)]==='action');if(_0x19c26d)return _0x42b275[_0xdc8b01(0x1c3)][_0xdc8b01(0x1ad)](_0x19c26d)+0x1;return _0x42b275['widgets'][_0xdc8b01(0x209)];}app['registerExtension']({'name':'CCNotes.PreviewPauseNodes',async 'nodeCreated'(_0x17329a){const _0x47c83c=a0_0x24ad;_0x17329a[_0x47c83c(0x1b3)][_0x47c83c(0x1ff)](_0x47c83c(0x1f1))&&(_0x17329a[_0x47c83c(0x1a9)]=[{'filename':'placeholder.png','subfolder':'','type':_0x47c83c(0x216)}]);if(_0x17329a[_0x47c83c(0x1b3)]['includes'](_0x47c83c(0x1fd))){addNativeControlPanel(_0x17329a);const _0x59e743=_0x17329a[_0x47c83c(0x1c3)]?.['find'](_0x17d835=>_0x17d835[_0x47c83c(0x1fb)]===_0x47c83c(0x1a2));if(_0x59e743){const _0x1eaa15=_0x59e743[_0x47c83c(0x20a)];_0x59e743['callback']=function(){const _0x16a63b=_0x47c83c;_0x1eaa15&&_0x1eaa15[_0x16a63b(0x1f6)](this,arguments),updateButtonVisibility(_0x17329a);};}_0x17329a['setSize'](_0x17329a[_0x47c83c(0x1b1)]());}if(_0x17329a[_0x47c83c(0x1b3)]===_0x47c83c(0x1cf)){const _0x551f61=_0x17329a[_0x47c83c(0x1c3)]?.[_0x47c83c(0x1ee)](_0x58fb91=>_0x58fb91[_0x47c83c(0x1fb)]===_0x47c83c(0x1d2));_0x551f61&&(_0x551f61[_0x47c83c(0x1c6)]=_0x47c83c(0x1bb),_0x551f61[_0x47c83c(0x1b1)]=()=>[0x0,0x0]),_0x17329a[_0x47c83c(0x1c7)](_0x17329a[_0x47c83c(0x1b1)]());}},async 'loadedGraphNode'(_0x50b77e){const _0x461ef8=a0_0x24ad;if(_0x50b77e[_0x461ef8(0x1b3)][_0x461ef8(0x1ff)](_0x461ef8(0x1fd))){addNativeControlPanel(_0x50b77e);if(_0x50b77e[_0x461ef8(0x1b3)][_0x461ef8(0x1ff)](_0x461ef8(0x1f1))){const _0x154ac4=_0x50b77e['onMouseDown'];_0x50b77e[_0x461ef8(0x1ea)]=function(_0x31a36c,_0xe1da10,_0x11b661){const _0x531c73=_0x461ef8,_0x404f0e=_0x154ac4?_0x154ac4['apply'](this,arguments):undefined;if(this[_0x531c73(0x1ac)]&&this[_0x531c73(0x1ac)][_0x531c73(0x209)]>0x1){const _0x43dbfc=_0xe1da10[0x0],_0x544726=this[_0x531c73(0x1f5)][0x0];if(typeof this[_0x531c73(0x1cb)]!==_0x531c73(0x1e1))this['imageIndex']=0x0;if(_0x31a36c['button']===0x0){if(_0x43dbfc<_0x544726*0.25){if(this[_0x531c73(0x1cb)]>0x0)this[_0x531c73(0x1cb)]--;}else{if(_0x43dbfc>_0x544726*0.75){if(this[_0x531c73(0x1cb)]<this[_0x531c73(0x1ac)][_0x531c73(0x209)]-0x1)this[_0x531c73(0x1cb)]++;}}}}return _0x404f0e;};}if(_0x50b77e[_0x461ef8(0x1b3)][_0x461ef8(0x1ff)]('Preview')){if(_0x50b77e[_0x461ef8(0x204)]?.[_0x461ef8(0x1de)]){_0x50b77e[_0x461ef8(0x1a9)]=_0x50b77e[_0x461ef8(0x204)]['_sdppp_cache'][_0x461ef8(0x1e0)]||_0x50b77e[_0x461ef8(0x1a9)];const _0x6b4b4e=_0x50b77e[_0x461ef8(0x204)][_0x461ef8(0x1de)]['text']||[];if(_0x6b4b4e[_0x461ef8(0x209)]>0x0){const _0xe62b99=_0x461ef8(0x1d2);_0x6b4b4e['forEach']((_0x140105,_0x8b6115)=>{const _0x487fc8=_0x461ef8,_0x5bd0c9=_0x8b6115===0x0?_0xe62b99:_0xe62b99+'_'+_0x8b6115;let _0x269c11=_0x50b77e[_0x487fc8(0x1c3)][_0x487fc8(0x1ee)](_0x4bfd7e=>_0x4bfd7e[_0x487fc8(0x1fb)]===_0x5bd0c9);if(!_0x269c11){const _0x10266a=ComfyWidgets[_0x487fc8(0x212)](_0x50b77e,_0x5bd0c9,[_0x487fc8(0x212),{'multiline':!![]}],app);_0x269c11=_0x10266a[_0x487fc8(0x1b8)];const _0x5d88cc=_0x50b77e[_0x487fc8(0x1c3)]['indexOf'](_0x269c11);_0x5d88cc!==-0x1&&_0x50b77e[_0x487fc8(0x1c3)][_0x487fc8(0x1d0)](_0x5d88cc,0x1);const _0x4b5872=findTextWidgetInsertPosition(_0x50b77e);_0x50b77e['widgets'][_0x487fc8(0x1d0)](_0x4b5872+_0x8b6115,0x0,_0x269c11);}_0x269c11['type']=_0x487fc8(0x20e),_0x269c11[_0x487fc8(0x1ef)]=_0x140105,_0x269c11['options']?_0x269c11[_0x487fc8(0x1fa)]['multiline']=!![]:_0x269c11[_0x487fc8(0x1fa)]={'multiline':!![]};});}}}updateButtonVisibility(_0x50b77e);}},async 'setup'(){const _0xe045d5=a0_0x24ad;api[_0xe045d5(0x1e7)](_0xe045d5(0x1ab),async({detail:_0x595fd2})=>{const _0x416e88=_0xe045d5,{node_id:_0x122a18,node_type:_0x82237f,action:_0x5947d7,data:_0x55ac1e}=_0x595fd2,_0x3bb5a2=app[_0x416e88(0x1e9)]['getNodeById'](_0x122a18);if(!_0x3bb5a2)return;switch(_0x82237f){case'preview':handlePreviewData(_0x3bb5a2,_0x55ac1e);break;case'pause':if(_0x5947d7===_0x416e88(0x1f2)){const _0x119d4d=getControlActionControl(_0x3bb5a2);if(_0x119d4d['isLinked']&&_0x119d4d['link']){const _0x9ae6dc=app[_0x416e88(0x1e9)][_0x416e88(0x1ae)][_0x119d4d[_0x416e88(0x20b)]],_0x2d7d3c=app[_0x416e88(0x1e9)][_0x416e88(0x1dd)](_0x9ae6dc[_0x416e88(0x1cc)]);_0x2d7d3c&&_0x2d7d3c[_0x416e88(0x1c3)]&&_0x2d7d3c[_0x416e88(0x1c3)][_0x416e88(0x209)]>0x0&&(_0x3bb5a2[_0x416e88(0x202)]=_0x2d7d3c[_0x416e88(0x1c3)][0x0][_0x416e88(0x1ef)]);}else _0x119d4d[_0x416e88(0x1b8)]?_0x3bb5a2[_0x416e88(0x202)]=_0x119d4d[_0x416e88(0x1b8)][_0x416e88(0x1ef)]:_0x3bb5a2[_0x416e88(0x202)]=_0x416e88(0x1fd);_0x3bb5a2[_0x416e88(0x1e5)]=!![],startAutoResumeCheck(_0x3bb5a2);}break;case _0x416e88(0x203):_0x55ac1e&&_0x55ac1e[_0x416e88(0x1e0)]&&_0x55ac1e[_0x416e88(0x1e0)][_0x416e88(0x209)]>0x0?(_0x3bb5a2['imageData']=_0x55ac1e[_0x416e88(0x1e0)],renderImageMode(_0x3bb5a2,_0x55ac1e[_0x416e88(0x1e0)]),!_0x3bb5a2['properties'][_0x416e88(0x1de)]&&(_0x3bb5a2[_0x416e88(0x204)]['_sdppp_cache']={}),_0x3bb5a2['properties']['_sdppp_cache']['images']=_0x55ac1e['images'],_0x3bb5a2[_0x416e88(0x204)][_0x416e88(0x1de)][_0x416e88(0x20e)]=_0x55ac1e[_0x416e88(0x20e)]):(_0x3bb5a2[_0x416e88(0x1ac)]=null,_0x3bb5a2['imageData']=null,_0x3bb5a2['properties'][_0x416e88(0x1de)]&&delete _0x3bb5a2[_0x416e88(0x204)][_0x416e88(0x1de)]);const _0x1d10d4=_0x416e88(0x1d2),_0x77305d=_0x55ac1e&&_0x55ac1e[_0x416e88(0x20e)]?_0x55ac1e[_0x416e88(0x20e)]:[],_0xae4426=_0x3bb5a2[_0x416e88(0x1c3)][_0x416e88(0x1da)](_0x3d3e5b=>_0x3d3e5b[_0x416e88(0x1fb)]===_0x1d10d4||_0x3d3e5b['name'][_0x416e88(0x1e2)](_0x1d10d4+'_'));_0xae4426[_0x416e88(0x1ec)](_0x3ed6b0=>{const _0x2f8663=_0x416e88;_0x3ed6b0['type']='hidden',_0x3ed6b0[_0x2f8663(0x1b1)]=()=>[0x0,0x0],_0x3ed6b0[_0x2f8663(0x1ef)]='';});_0x77305d[_0x416e88(0x209)]>0x0&&_0x77305d['forEach']((_0x19691e,_0x29387b)=>{const _0x5a9a7f=_0x416e88,_0x71ec06=_0x29387b===0x0?_0x1d10d4:_0x1d10d4+'_'+_0x29387b;let _0x19c450=_0x3bb5a2[_0x5a9a7f(0x1c3)][_0x5a9a7f(0x1ee)](_0x1eb62c=>_0x1eb62c[_0x5a9a7f(0x1fb)]===_0x71ec06);if(!_0x19c450){const _0x1f6ddd=ComfyWidgets['STRING'](_0x3bb5a2,_0x71ec06,[_0x5a9a7f(0x212),{'multiline':!![]}],app);_0x19c450=_0x1f6ddd[_0x5a9a7f(0x1b8)];const _0x1ddf2a=_0x3bb5a2[_0x5a9a7f(0x1c3)][_0x5a9a7f(0x1ad)](_0x19c450);if(_0x1ddf2a!==-0x1){_0x3bb5a2[_0x5a9a7f(0x1c3)][_0x5a9a7f(0x1d0)](_0x1ddf2a,0x1);let _0x5dfab2=findTextWidgetInsertPosition(_0x3bb5a2);const _0x30ca87=_0x3bb5a2[_0x5a9a7f(0x1c3)][_0x5a9a7f(0x214)](_0x2c7b3a=>_0x2c7b3a['name'][_0x5a9a7f(0x1e2)](_0x1d10d4));_0x30ca87!==-0x1&&_0x30ca87>=_0x5dfab2&&(_0x5dfab2=_0x30ca87+0x1),_0x3bb5a2['widgets']['splice'](_0x5dfab2,0x0,_0x19c450);}}_0x19c450[_0x5a9a7f(0x1c6)]='text',_0x19c450[_0x5a9a7f(0x1ef)]=_0x19691e,_0x19c450['computeSize']=function(_0x3eb571){const _0x40c14=_0x5a9a7f,_0xded024=0x32,_0x377a61=0x12c,_0x9d56b6=0x3,_0xd8a4f8=0x12,_0x53aa27=(this[_0x40c14(0x1ef)]||'')[_0x40c14(0x1b6)]('\x0a')['length'],_0xc395fb=_0x53aa27*_0xd8a4f8+_0x9d56b6;return[_0x3eb571,Math['max'](_0xded024,Math[_0x40c14(0x1d4)](_0xc395fb,_0x377a61))];},_0x19c450[_0x5a9a7f(0x1fa)]?_0x19c450[_0x5a9a7f(0x1fa)][_0x5a9a7f(0x1d8)]=!![]:_0x19c450['options']={'multiline':!![]},_0x19c450[_0x5a9a7f(0x1f0)]&&(_0x19c450[_0x5a9a7f(0x1f0)]['style'][_0x5a9a7f(0x1a8)]='',_0x19c450[_0x5a9a7f(0x1f0)][_0x5a9a7f(0x1a1)]=![]);});setTimeout(()=>{const _0x15ec05=_0x416e88;app[_0x15ec05(0x1e9)][_0x15ec05(0x1b7)](!![],![]);},0x1);if(_0x5947d7===_0x416e88(0x1f2)){const _0x5afc95=getControlActionControl(_0x3bb5a2);if(_0x5afc95[_0x416e88(0x1eb)]&&_0x5afc95[_0x416e88(0x20b)]){const _0x3c61ac=app[_0x416e88(0x1e9)][_0x416e88(0x1ae)][_0x5afc95['link']],_0x448bca=app[_0x416e88(0x1e9)][_0x416e88(0x1dd)](_0x3c61ac[_0x416e88(0x1cc)]);_0x448bca&&_0x448bca['widgets']&&_0x448bca[_0x416e88(0x1c3)][_0x416e88(0x209)]>0x0&&(_0x3bb5a2[_0x416e88(0x202)]=_0x448bca[_0x416e88(0x1c3)][0x0][_0x416e88(0x1ef)]);}else _0x5afc95[_0x416e88(0x1b8)]?_0x3bb5a2[_0x416e88(0x202)]=_0x5afc95[_0x416e88(0x1b8)][_0x416e88(0x1ef)]:_0x3bb5a2[_0x416e88(0x202)]='Pause';_0x3bb5a2[_0x416e88(0x1e5)]=!![],startAutoResumeCheck(_0x3bb5a2);}break;}});}});function handlePreviewData(_0x488225,_0x1983e1){const _0x770c0e=a0_0x24ad;_0x1983e1&&_0x1983e1[_0x770c0e(0x1e0)]&&_0x1983e1['images'][_0x770c0e(0x209)]>0x0?(_0x488225[_0x770c0e(0x1a9)]=_0x1983e1[_0x770c0e(0x1e0)],renderImageMode(_0x488225,_0x1983e1[_0x770c0e(0x1e0)]),!_0x488225[_0x770c0e(0x204)][_0x770c0e(0x1de)]&&(_0x488225[_0x770c0e(0x204)][_0x770c0e(0x1de)]={}),_0x488225['properties'][_0x770c0e(0x1de)][_0x770c0e(0x1e0)]=_0x1983e1[_0x770c0e(0x1e0)],_0x488225[_0x770c0e(0x204)]['_sdppp_cache'][_0x770c0e(0x20e)]=_0x1983e1[_0x770c0e(0x20e)]):(_0x488225[_0x770c0e(0x1ac)]=null,_0x488225[_0x770c0e(0x1a9)]=null,_0x488225['properties']['_sdppp_cache']&&delete _0x488225[_0x770c0e(0x204)]['_sdppp_cache']);const _0x2b5b50='preview_text',_0x221ec2=_0x1983e1&&_0x1983e1[_0x770c0e(0x20e)]?_0x1983e1[_0x770c0e(0x20e)]:[],_0x21a024=_0x488225[_0x770c0e(0x1c3)][_0x770c0e(0x1da)](_0x5bd21a=>_0x5bd21a[_0x770c0e(0x1fb)]===_0x2b5b50||_0x5bd21a['name'][_0x770c0e(0x1e2)](_0x2b5b50+'_'));_0x21a024[_0x770c0e(0x1ec)](_0x824f59=>{const _0x1c2326=_0x770c0e;_0x824f59[_0x1c2326(0x1c6)]='hidden',_0x824f59[_0x1c2326(0x1b1)]=()=>[0x0,0x0],_0x824f59['value']='';}),_0x221ec2[_0x770c0e(0x209)]>0x0&&_0x221ec2['forEach']((_0x3dd23c,_0x40035c)=>{const _0xeec03d=_0x770c0e,_0xfaf007=_0x40035c===0x0?_0x2b5b50:_0x2b5b50+'_'+_0x40035c;let _0x381a54=_0x488225[_0xeec03d(0x1c3)][_0xeec03d(0x1ee)](_0x2137f0=>_0x2137f0[_0xeec03d(0x1fb)]===_0xfaf007);if(!_0x381a54){const _0x3620dc=ComfyWidgets['STRING'](_0x488225,_0xfaf007,[_0xeec03d(0x212),{'multiline':!![]}],app);_0x381a54=_0x3620dc['widget'];const _0x1075dc=_0x488225[_0xeec03d(0x1c3)]['indexOf'](_0x381a54);if(_0x1075dc!==-0x1){_0x488225[_0xeec03d(0x1c3)][_0xeec03d(0x1d0)](_0x1075dc,0x1);let _0x9405f9=_0x488225['widgets'][_0xeec03d(0x209)];const _0xf8b28c=_0x488225[_0xeec03d(0x1c3)][_0xeec03d(0x214)](_0x1a26f1=>_0x1a26f1[_0xeec03d(0x1fb)][_0xeec03d(0x1e2)](_0x2b5b50));_0xf8b28c!==-0x1&&(_0x9405f9=_0xf8b28c+0x1),_0x488225[_0xeec03d(0x1c3)]['splice'](_0x9405f9,0x0,_0x381a54);}}_0x381a54[_0xeec03d(0x1c6)]=_0xeec03d(0x20e),_0x381a54[_0xeec03d(0x1ef)]=_0x3dd23c,_0x381a54['computeSize']=function(_0x78f027){const _0x1fae45=_0xeec03d,_0x496e8b=0x32,_0x1d79d3=0x12c,_0xb3d1ee=0x3,_0x5378a4=0x12,_0x1fe92a=(this[_0x1fae45(0x1ef)]||'')[_0x1fae45(0x1b6)]('\x0a')[_0x1fae45(0x209)],_0x2e4482=_0x1fe92a*_0x5378a4+_0xb3d1ee;return[_0x78f027,Math[_0x1fae45(0x1b2)](_0x496e8b,Math[_0x1fae45(0x1d4)](_0x2e4482,_0x1d79d3))];},_0x381a54['options']?_0x381a54['options']['multiline']=!![]:_0x381a54[_0xeec03d(0x1fa)]={'multiline':!![]},_0x381a54[_0xeec03d(0x1f0)]&&(_0x381a54[_0xeec03d(0x1f0)][_0xeec03d(0x20c)]['display']='',_0x381a54[_0xeec03d(0x1f0)][_0xeec03d(0x1a1)]=![]);}),setTimeout(()=>{const _0x5c2f97=_0x770c0e;app[_0x5c2f97(0x1e9)]['setDirtyCanvas'](!![],![]);},0x1);}async function renderImageMode(_0x5eec01,_0x421eb2){const _0x993755=a0_0x24ad;if(!_0x421eb2||_0x421eb2['length']===0x0){_0x5eec01[_0x993755(0x1ac)]=null,_0x5eec01[_0x993755(0x1b9)]=null;return;}const _0x503ca5=_0x421eb2['map'](_0x930076=>{const _0x1d99cc=_0x993755,_0xc4d36e=new URLSearchParams({'filename':_0x930076['filename'],'type':_0x930076[_0x1d99cc(0x1c6)],'subfolder':_0x930076[_0x1d99cc(0x206)]}),_0x43e760=api[_0x1d99cc(0x1c9)](_0x1d99cc(0x1b5)+_0xc4d36e['toString']());return new Promise(_0x246da0=>{const _0x7f0a7e=_0x1d99cc,_0x2a0796=new Image();_0x2a0796[_0x7f0a7e(0x211)]=()=>_0x246da0(_0x2a0796),_0x2a0796[_0x7f0a7e(0x1a5)]=()=>{const _0x231097=_0x7f0a7e;console['warn']('['+(_0x5eec01[_0x231097(0x1b3)]||_0x231097(0x1af))+_0x231097(0x1dc)+_0x930076[_0x231097(0x20d)]),_0x246da0(null);},_0x2a0796['src']=_0x43e760;});}),_0x34d4b7=(await Promise[_0x993755(0x1fe)](_0x503ca5))[_0x993755(0x1da)](_0x82435a=>_0x82435a!==null);_0x34d4b7[_0x993755(0x209)]>0x0&&(_0x5eec01[_0x993755(0x1ac)]=_0x34d4b7,_0x5eec01[_0x993755(0x1b9)]=_0x34d4b7['slice'](),_0x421eb2&&_0x421eb2['length']>0x0&&(_0x5eec01['_ccnotes_full_images_data']=JSON[_0x993755(0x1fc)](JSON['stringify'](_0x421eb2))));}function getControlActionControl(_0x445df3){const _0x1ef42f=a0_0x24ad,_0x5bc6ec=_0x445df3[_0x1ef42f(0x1a6)]?.['findIndex'](_0x45cebe=>_0x45cebe[_0x1ef42f(0x1fb)]===_0x1ef42f(0x1a2));if(_0x5bc6ec===-0x1||_0x5bc6ec===undefined)return{'isLinked':![]};const _0x599b51=_0x445df3[_0x1ef42f(0x1a6)][_0x5bc6ec],_0x4f1bf3=_0x445df3['widgets']?.['find'](_0x3659b4=>_0x3659b4[_0x1ef42f(0x1fb)]==='action');if(_0x599b51[_0x1ef42f(0x20b)])return{'isLinked':!![],'link':_0x599b51[_0x1ef42f(0x20b)],'input':_0x599b51};else{if(_0x4f1bf3)return{'isLinked':![],'widget':_0x4f1bf3};}return{'isLinked':![]};}function a0_0x24ad(_0x49c545,_0x2669bc){_0x49c545=_0x49c545-0x1a1;const _0x561fee=a0_0x561f();let _0x24add0=_0x561fee[_0x49c545];if(a0_0x24ad['vtHrSH']===undefined){var _0xd704cb=function(_0x35d34a){const _0xb1c832='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x429280='',_0x1dc955='';for(let _0x53d085=0x0,_0x4319f4,_0x483e99,_0x350999=0x0;_0x483e99=_0x35d34a['charAt'](_0x350999++);~_0x483e99&&(_0x4319f4=_0x53d085%0x4?_0x4319f4*0x40+_0x483e99:_0x483e99,_0x53d085++%0x4)?_0x429280+=String['fromCharCode'](0xff&_0x4319f4>>(-0x2*_0x53d085&0x6)):0x0){_0x483e99=_0xb1c832['indexOf'](_0x483e99);}for(let _0x204a49=0x0,_0x18c1d3=_0x429280['length'];_0x204a49<_0x18c1d3;_0x204a49++){_0x1dc955+='%'+('00'+_0x429280['charCodeAt'](_0x204a49)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1dc955);};a0_0x24ad['WgkwyY']=_0xd704cb,a0_0x24ad['xWrKFa']={},a0_0x24ad['vtHrSH']=!![];}const _0x2ca69c=_0x561fee[0x0],_0x519603=_0x49c545+_0x2ca69c,_0x32a184=a0_0x24ad['xWrKFa'][_0x519603];return!_0x32a184?(_0x24add0=a0_0x24ad['WgkwyY'](_0x24add0),a0_0x24ad['xWrKFa'][_0x519603]=_0x24add0):_0x24add0=_0x32a184,_0x24add0;}function startAutoResumeCheck(_0x2f1dd4){const _0x1683ea=a0_0x24ad;if(_0x2f1dd4[_0x1683ea(0x1aa)])clearInterval(_0x2f1dd4[_0x1683ea(0x1aa)]);_0x2f1dd4[_0x1683ea(0x1aa)]=setInterval(()=>{const _0x2f8cfc=_0x1683ea;if(!_0x2f1dd4[_0x2f8cfc(0x1e5)]){clearInterval(_0x2f1dd4[_0x2f8cfc(0x1aa)]),_0x2f1dd4['check_timer']=null,_0x2f1dd4[_0x2f8cfc(0x1b9)]=null;return;}if(_0x2f1dd4['imgs']&&_0x2f1dd4[_0x2f8cfc(0x1ac)][_0x2f8cfc(0x209)]>0x0){_0x2f1dd4[_0x2f8cfc(0x1b9)]&&_0x2f1dd4[_0x2f8cfc(0x1ac)][_0x2f8cfc(0x209)]===_0x2f1dd4[_0x2f8cfc(0x1b9)][_0x2f8cfc(0x209)]&&(typeof _0x2f1dd4[_0x2f8cfc(0x1cb)]===_0x2f8cfc(0x1e1)&&(_0x2f1dd4[_0x2f8cfc(0x1b0)]=_0x2f1dd4['imageIndex']));for(let _0x1f4ab4=0x0;_0x1f4ab4<_0x2f1dd4[_0x2f8cfc(0x1ac)]['length'];_0x1f4ab4++){const _0x4164ff=_0x2f1dd4[_0x2f8cfc(0x1ac)][_0x1f4ab4];if(_0x4164ff&&_0x4164ff[_0x2f8cfc(0x1bf)]&&_0x4164ff['src']['includes'](_0x2f8cfc(0x1ba)))try{let _0x5e623a=_0x1f4ab4;if(_0x2f1dd4[_0x2f8cfc(0x1b9)]&&_0x2f1dd4[_0x2f8cfc(0x1b9)][_0x2f8cfc(0x209)]>_0x2f1dd4[_0x2f8cfc(0x1ac)][_0x2f8cfc(0x209)]){if(typeof _0x2f1dd4[_0x2f8cfc(0x1b0)]===_0x2f8cfc(0x1e1))_0x5e623a=_0x2f1dd4['_ccnotes_last_valid_index'];else typeof _0x2f1dd4['imageIndex']===_0x2f8cfc(0x1e1)?_0x5e623a=_0x2f1dd4[_0x2f8cfc(0x1cb)]:_0x5e623a=0x0;}const _0x46faad=new URL(_0x4164ff[_0x2f8cfc(0x1bf)]),_0x32917c=_0x46faad['searchParams'][_0x2f8cfc(0x1ed)](_0x2f8cfc(0x20d)),_0x35e9d8=_0x46faad[_0x2f8cfc(0x20f)]['get']('subfolder'),_0x281479=_0x46faad[_0x2f8cfc(0x20f)][_0x2f8cfc(0x1ed)](_0x2f8cfc(0x1c6));if(_0x32917c&&_0x2f1dd4['_ccnotes_full_images_data']){const _0x1d34f8=_0x2f1dd4['_ccnotes_full_images_data'][_0x5e623a];if(!_0x1d34f8||_0x1d34f8['filename']!==_0x32917c){if(!_0x2f1dd4[_0x2f8cfc(0x1f8)][_0x5e623a])_0x2f1dd4[_0x2f8cfc(0x1f8)][_0x5e623a]={};_0x2f1dd4[_0x2f8cfc(0x1f8)][_0x5e623a]={'filename':_0x32917c,'subfolder':_0x35e9d8,'type':_0x281479},_0x2f1dd4['_ccnotes_full_imgs']&&_0x5e623a<_0x2f1dd4[_0x2f8cfc(0x1b9)]['length']&&(_0x2f1dd4['_ccnotes_full_imgs'][_0x5e623a]=_0x4164ff);}}}catch(_0x3d9a8b){console[_0x2f8cfc(0x1e6)](_0x2f8cfc(0x1e4),_0x3d9a8b);}}}_0x2f1dd4['_ccnotes_full_imgs']&&_0x2f1dd4[_0x2f8cfc(0x1b9)][_0x2f8cfc(0x209)]>0x1&&(_0x2f1dd4[_0x2f8cfc(0x1ac)]&&_0x2f1dd4[_0x2f8cfc(0x1ac)][_0x2f8cfc(0x209)]<_0x2f1dd4[_0x2f8cfc(0x1b9)][_0x2f8cfc(0x209)]&&(_0x2f1dd4['imgs']=_0x2f1dd4[_0x2f8cfc(0x1b9)][_0x2f8cfc(0x1d6)](),app[_0x2f8cfc(0x1e9)]['setDirtyCanvas'](!![],![])));const _0x5e5ea4=getControlActionValue(_0x2f1dd4),_0x48e7c7=String(_0x5e5ea4)[_0x2f8cfc(0x217)]();if(_0x48e7c7['includes'](_0x2f8cfc(0x1c1)))sendAction(_0x2f1dd4,_0x2f8cfc(0x1b4));else _0x48e7c7[_0x2f8cfc(0x1ff)](_0x2f8cfc(0x1f3))&&(api['interrupt'](),sendAction(_0x2f1dd4,_0x2f8cfc(0x1e8)));},0xc8);}function getControlActionValue(_0x22b2fc){const _0x59f326=a0_0x24ad,_0x51e072=getControlActionControl(_0x22b2fc);if(_0x51e072['isLinked']){const _0x1a540a=app['graph'][_0x59f326(0x1ae)][_0x51e072[_0x59f326(0x20b)]];if(!_0x1a540a)return _0x59f326(0x1f2);const _0x1e6115=app[_0x59f326(0x1e9)][_0x59f326(0x1dd)](_0x1a540a[_0x59f326(0x1cc)]);if(!_0x1e6115)return _0x59f326(0x1f2);if(_0x1e6115[_0x59f326(0x1c3)]&&_0x1e6115[_0x59f326(0x1c3)][_0x59f326(0x209)]>0x0)return String(_0x1e6115['widgets'][0x0]['value']);}else{if(_0x51e072[_0x59f326(0x1b8)])return String(_0x51e072[_0x59f326(0x1b8)]['value']);}return'pause';}function addNativeControlPanel(_0xdcb43f){updateButtonVisibility(_0xdcb43f);}function updateButtonVisibility(_0x24c89e){const _0x4fd6e0=a0_0x24ad,_0x46ef90=_0x24c89e[_0x4fd6e0(0x1c3)]?.[_0x4fd6e0(0x1ee)](_0x4e023c=>_0x4e023c[_0x4fd6e0(0x1fb)]===_0x4fd6e0(0x1a2));if(!_0x46ef90)return;const _0x37f6cd=_0x46ef90[_0x4fd6e0(0x1ef)],_0x59cfc3=_0x37f6cd===_0x4fd6e0(0x1fd),_0x2a32a1=_0x24c89e[_0x4fd6e0(0x1c3)]?.[_0x4fd6e0(0x1ee)](_0x21c9df=>_0x21c9df[_0x4fd6e0(0x1fb)]===_0x4fd6e0(0x1b4)),_0x3c2563=_0x24c89e[_0x4fd6e0(0x1c3)]?.[_0x4fd6e0(0x1ee)](_0x3b0cb3=>_0x3b0cb3[_0x4fd6e0(0x1fb)]==='▣\x20CANCEL'),_0x21451f=_0x2a32a1&&_0x3c2563;if(_0x59cfc3&&!_0x21451f){const _0x42aa0d={'serialize':![]},_0x3b59e6=_0x24c89e[_0x4fd6e0(0x1f9)]('button','continue',null,()=>sendAction(_0x24c89e,'▶\x20CONTINUE'),_0x42aa0d);_0x3b59e6[_0x4fd6e0(0x1fb)]=_0x4fd6e0(0x1b4);const _0x48edb2=_0x24c89e[_0x4fd6e0(0x1f9)](_0x4fd6e0(0x213),_0x4fd6e0(0x1f3),null,()=>{const _0xd1f7a6=_0x4fd6e0;api['interrupt'](),sendAction(_0x24c89e,_0xd1f7a6(0x1e8));},_0x42aa0d);_0x48edb2[_0x4fd6e0(0x1fb)]=_0x4fd6e0(0x1e8);const _0x1d2e0a=_0x24c89e[_0x4fd6e0(0x1c3)][_0x4fd6e0(0x1f4)](_0x4d63e0=>_0x4d63e0[_0x4fd6e0(0x1fb)]==='action');if(_0x1d2e0a!==-0x1){const _0x5e8bde=_0x24c89e[_0x4fd6e0(0x1c3)]['indexOf'](_0x3b59e6),_0x15a347=_0x24c89e['widgets'][_0x4fd6e0(0x1ad)](_0x48edb2);if(_0x5e8bde!==-0x1)_0x24c89e[_0x4fd6e0(0x1c3)][_0x4fd6e0(0x1d0)](_0x5e8bde,0x1);if(_0x15a347!==-0x1){const _0x5199a9=_0x5e8bde!==-0x1&&_0x15a347>_0x5e8bde?_0x15a347-0x1:_0x15a347;_0x24c89e[_0x4fd6e0(0x1c3)][_0x4fd6e0(0x1d0)](_0x5199a9,0x1);}_0x24c89e[_0x4fd6e0(0x1c3)]['splice'](_0x1d2e0a+0x1,0x0,_0x3b59e6,_0x48edb2);}_0x24c89e[_0x4fd6e0(0x1c7)](_0x24c89e[_0x4fd6e0(0x1b1)]()),app[_0x4fd6e0(0x1e9)]&&app[_0x4fd6e0(0x1e9)][_0x4fd6e0(0x1b7)](!![],!![]);}else{if(!_0x59cfc3&&_0x21451f){const _0x548340=_0x24c89e[_0x4fd6e0(0x1c3)][_0x4fd6e0(0x1ad)](_0x2a32a1),_0xee8dd0=_0x24c89e[_0x4fd6e0(0x1c3)][_0x4fd6e0(0x1ad)](_0x3c2563);_0x548340!==-0x1&&_0x24c89e[_0x4fd6e0(0x1c3)][_0x4fd6e0(0x1d0)](_0x548340,0x1);if(_0xee8dd0!==-0x1){const _0x1a1e3c=_0x548340!==-0x1&&_0xee8dd0>_0x548340?_0xee8dd0-0x1:_0xee8dd0;_0x24c89e['widgets']['splice'](_0x1a1e3c,0x1);}_0x24c89e[_0x4fd6e0(0x1c7)](_0x24c89e[_0x4fd6e0(0x1b1)]()),app['graph']&&app[_0x4fd6e0(0x1e9)][_0x4fd6e0(0x1b7)](!![],!![]);}}}function sendAction(_0xc9b11e,_0x340898){const _0x4e5475=a0_0x24ad;_0xc9b11e[_0x4e5475(0x1e5)]=![];_0xc9b11e['check_timer']&&(clearInterval(_0xc9b11e[_0x4e5475(0x1aa)]),_0xc9b11e[_0x4e5475(0x1aa)]=null);const _0x26c32f=_0x340898[_0x4e5475(0x217)](),_0x15406b='preview_text',_0x2ceeff=_0xc9b11e['widgets']?.[_0x4e5475(0x1da)](_0x5adc0d=>_0x5adc0d[_0x4e5475(0x1fb)]===_0x15406b||_0x5adc0d['name']['startsWith'](_0x15406b+'_'));_0x2ceeff[_0x4e5475(0x1d1)]((_0x3a424e,_0x21604d)=>{const _0x590d32=_0x4e5475;if(_0x3a424e['name']===_0x15406b)return-0x1;if(_0x21604d[_0x590d32(0x1fb)]===_0x15406b)return 0x1;const _0x336655=parseInt(_0x3a424e['name'][_0x590d32(0x1b6)]('_')[0x2]||0x0),_0x1c2500=parseInt(_0x21604d[_0x590d32(0x1fb)][_0x590d32(0x1b6)]('_')[0x2]||0x0);return _0x336655-_0x1c2500;});let _0x99767e=[];_0x2ceeff&&_0x2ceeff[_0x4e5475(0x209)]>0x0&&(_0x99767e=_0x2ceeff[_0x4e5475(0x1c8)](_0x49de3d=>_0x49de3d['value']));if(_0x26c32f['includes'](_0x4e5475(0x1c1))||_0x26c32f[_0x4e5475(0x1ff)]('continue')||_0x26c32f[_0x4e5475(0x1ff)]('cancel')){const _0x4ffb19=getControlActionControl(_0xc9b11e),_0x39ddee=_0xc9b11e[_0x4e5475(0x202)]!==undefined?_0xc9b11e['_restore_state']:_0x4e5475(0x1fd);if(_0x4ffb19[_0x4e5475(0x1eb)]&&_0x4ffb19[_0x4e5475(0x20b)]){const _0x421470=app[_0x4e5475(0x1e9)][_0x4e5475(0x1ae)][_0x4ffb19[_0x4e5475(0x20b)]],_0x323b20=app[_0x4e5475(0x1e9)]['getNodeById'](_0x421470[_0x4e5475(0x1cc)]);if(_0x323b20&&_0x323b20[_0x4e5475(0x1c3)]&&_0x323b20[_0x4e5475(0x1c3)][_0x4e5475(0x209)]>0x0){const _0x2950fd=_0x323b20[_0x4e5475(0x1c3)][0x0];_0x2950fd['value']!==_0x39ddee&&(_0x2950fd['value']=_0x39ddee,_0x323b20[_0x4e5475(0x1b7)](!![],!![]));}}else _0x4ffb19[_0x4e5475(0x1b8)]&&(_0x4ffb19[_0x4e5475(0x1b8)][_0x4e5475(0x1ef)]=_0x39ddee,_0xc9b11e[_0x4e5475(0x1b7)](!![],!![]));setTimeout(()=>{updateButtonVisibility(_0xc9b11e);},0x1);}let _0xa57690=_0x4e5475(0x1c2);if(_0x26c32f[_0x4e5475(0x1ff)](_0x4e5475(0x1f3)))_0xa57690='cancel';const _0x10dd67={'node_id':_0xc9b11e['id'],'action':_0xa57690,'edited_text':_0x99767e,'images':_0xc9b11e['_ccnotes_full_images_data']};api[_0x4e5475(0x207)](_0x4e5475(0x1e3),{'method':_0x4e5475(0x219),'headers':{'Content-Type':'application/json'},'body':JSON['stringify'](_0x10dd67)})[_0x4e5475(0x1ce)](_0x5b7f42=>{const _0x2cf4ba=_0x4e5475;console[_0x2cf4ba(0x1be)]('['+(_0xc9b11e['comfyClass']||_0x2cf4ba(0x1d3))+_0x2cf4ba(0x1cd),_0x5b7f42);});}