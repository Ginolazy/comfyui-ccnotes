const a0_0x5f22f3=a0_0xea5f;(function(_0x4b25d2,_0x2a9a24){const _0x338bd0=a0_0xea5f,_0x2cef17=_0x4b25d2();while(!![]){try{const _0x2dce5=parseInt(_0x338bd0(0x15a))/0x1+parseInt(_0x338bd0(0x17e))/0x2*(-parseInt(_0x338bd0(0x135))/0x3)+parseInt(_0x338bd0(0x18e))/0x4+parseInt(_0x338bd0(0x128))/0x5+parseInt(_0x338bd0(0x191))/0x6*(parseInt(_0x338bd0(0x173))/0x7)+parseInt(_0x338bd0(0x144))/0x8*(parseInt(_0x338bd0(0x14a))/0x9)+-parseInt(_0x338bd0(0x132))/0xa;if(_0x2dce5===_0x2a9a24)break;else _0x2cef17['push'](_0x2cef17['shift']());}catch(_0x54ca22){_0x2cef17['push'](_0x2cef17['shift']());}}}(a0_0x33c7,0x4d653));import{app}from'../../scripts/app.js';import{api}from'../../scripts/api.js';import{ComfyWidgets}from'../../scripts/widgets.js';function a0_0x33c7(){const _0x35ddd3=['y29TzNLdBgfZCW','BgvUz3rO','yNv0Dg9U','Aw5KzxHpzG','Aw5WDxrfBa','Aw1NCW','ChjVCgvYDgLLCW','u1rssu5h','Aw5JBhvKzxm','mJKWnti4BNrmCNjJ','zMLUzeLUzgv4','B3v0Chv0CW','uhjLDMLLDW','Bwf4','y2f0y2G','y29TChv0zvnPEMu','C3bSAxq','AxnmAw5Rzwq','zMv0y2HbCgK','y2fUy2vS','q0noB3rLCY5qCMv2Awv3ugf1C2voB2rLCW','x3nKChbWx2nHy2HL','C2vHCMnOugfYyw1Z','CMvHze9UBhK','C2XPy2u','D2LKz2v0CW','ChjLDMLLD190zxH0','B3v0Chv0xW','C3LUy091Dhb1DfbVCNrZ','x3jLC3rVCMvFC3rHDgu','C3rYAw5NAwz5','DgfYz2v0x2LK','qw55uhjLDMLLDW','y29UDgLUDwu','mJeWmJaYm1HmB0jssW','B25dB25Uzwn0Aw9UC0nOyw5Nzq','zgLZCgXHEq','DgfYz2v0x3nSB3q','CgfZCW','B25nB3vZzurVD24','zM9YrwfJAa','Aw1Hz2veyxrH','Dg9tDhjPBMC','BgLUAW','z2v0','oti0nZiYAMjKq0H6','AxnFD2fPDgLUzW','Aw1Hz2vZ','y2nUB3rLCY5UB2rLx2v2zw50','BNvTyMvY','xsbgywLSzwqGDg8GBg9HzcbPBwfNztOG','ywXS','x2nJBM90zxnFBgfZDf92ywXPzf9PBMrLEa','DgvTCa','4PA2ienptLrjtLvf','Dgv4Da','x2nJBM90zxnFzNvSBf9PBwfNzxnFzgf0yq','z3jHCgG','ywrKv2LKz2v0','zMLSDgvY','l3zPzxC/','mta1odyYofz3CKjQtW','BwLU','DhLWzq','mtjPt3LNreK','BgfIzwW','ywrKt3v0Chv0','zMLSzw5HBwu','y2fSBgjHy2S','C2v0u2L6zq','ChjVDg90ExbL','Aw50zxjYDxb0','Aw5WDxrZ','z2v0tM9Kzuj5swq','ugf1C2voB2rL','DMfSDwu','nti5nZuWCgPZCLbJ','xsbgywLSzwqGDg8GC2vUzcbHy3rPB246','yxbWBgLJyxrPB24VANnVBG','D2LKz2v0','CMvNAxn0zxjfEhrLBNnPB24','ChjLDMLLDW','C3bSAwnL','ChvZAa','ue9tva','ywn0Aw9U','mta0mtK0nJbArgvRywG','4PAJienbtKnfta','C3vIzM9SzgvY','m1LWzKjbtq','C3rHCNrZv2L0Aa','D2fYBG','x2nJBM90zxnFzNvSBf9PBwDZ','C3jJ','yxbWBhK','zMLUza','BxvSDgLSAw5L','BwfW','zMLUzeXHC3rjBMrLEa','AgLKzgvU','B3b0Aw9UCW','w0ndtM90zxnDievYCM9YihbHCNnPBMCGy2XPChnWywnLihvYBdO','CgXHy2vOB2XKzxiUCg5N','CMvTB3zLt3v0Chv0','ogPsyNHsCG','C2v0rgLYDhLdyw52yxm','y2HLy2TFDgLTzxi','Dg9mB3DLCKnHC2u','B3jPz2LUx3nSB3q','yxbPvvjm','ntaZnJq0nwvmCeX3Ea','ugf1C2u','BgLUA3m','BMfTzq','Cgf1C2u','Aw1Hz2vjBMrLEa','B3jPz2LUx2LK'];a0_0x33c7=function(){return _0x35ddd3;};return a0_0x33c7();}export function setupOutputPortSync(_0x4a70f7,_0x291d17){const _0x5bd9ff=a0_0xea5f;_0x4a70f7[_0x5bd9ff(0x197)][_0x5bd9ff(0x16d)]=function(){const _0x43510f=_0x5bd9ff;if(!this[_0x43510f(0x124)]||!this[_0x43510f(0x15c)])return;const _0x4ebea4=this[_0x43510f(0x124)][_0x43510f(0x18c)](_0x3f7fb8=>_0x3f7fb8[_0x43510f(0x14d)][_0x43510f(0x136)]('input_')),_0x2c224b=Math[_0x43510f(0x15e)](0x1,_0x4ebea4['length']);while(this[_0x43510f(0x15c)]['length']>_0x2c224b){this[_0x43510f(0x143)](this[_0x43510f(0x15c)][_0x43510f(0x152)]-0x1);}while(this[_0x43510f(0x15c)][_0x43510f(0x152)]<_0x2c224b){const _0x65e984=this[_0x43510f(0x15c)][_0x43510f(0x152)]+0x1;this[_0x43510f(0x193)]('output_'+_0x65e984,'*');}for(let _0x2e85e1=0x0;_0x2e85e1<_0x2c224b;_0x2e85e1++){const _0x20d806=_0x4ebea4[_0x2e85e1],_0x264129=this['outputs'][_0x2e85e1];if(!_0x264129)continue;let _0xe0ed5d=_0x43510f(0x16c)+(_0x2e85e1+0x1),_0x453451='*';if(_0x20d806&&_0x20d806['link']!==null){const _0x11f9ea=_0x291d17[_0x43510f(0x18a)][_0x43510f(0x14c)][_0x20d806[_0x43510f(0x17c)]];if(_0x11f9ea){const _0x181280=_0x291d17[_0x43510f(0x18a)][_0x43510f(0x125)](_0x11f9ea[_0x43510f(0x150)]);if(_0x181280){const _0x2d1d8e=_0x181280[_0x43510f(0x15c)][_0x11f9ea[_0x43510f(0x148)]];if(_0x2d1d8e){const _0x3c6b62=_0x2d1d8e[_0x43510f(0x190)],_0x1bf19e=_0x2d1d8e[_0x43510f(0x192)]||_0x2d1d8e['name'];if(_0x3c6b62!=='*')_0x453451=_0x3c6b62,_0xe0ed5d=_0x453451;else _0x1bf19e&&_0x1bf19e!=='*'&&(_0xe0ed5d=_0x1bf19e);}}}}if(_0x264129['type']!==_0x453451||_0x264129[_0x43510f(0x192)]!==_0xe0ed5d){if(_0x264129[_0x43510f(0x14c)]&&_0x264129[_0x43510f(0x14c)]['length']>0x0){const _0x1f6912=[];for(const _0x3bc97b of _0x264129[_0x43510f(0x14c)]){const _0x41891d=_0x291d17[_0x43510f(0x18a)]['links'][_0x3bc97b];if(!_0x41891d)continue;const _0x3a5eec=_0x291d17[_0x43510f(0x18a)][_0x43510f(0x125)](_0x41891d[_0x43510f(0x170)]);if(!_0x3a5eec)continue;const _0x29b4de=_0x3a5eec[_0x43510f(0x124)][_0x41891d[_0x43510f(0x176)]];if(!_0x29b4de)continue;if(_0x453451==='*')continue;if(_0x29b4de[_0x43510f(0x190)]==='*')continue;_0x29b4de[_0x43510f(0x190)]!==_0x453451&&_0x1f6912[_0x43510f(0x12f)](_0x3bc97b);}for(const _0x38d789 of _0x1f6912){_0x291d17['graph']['removeLink'](_0x38d789);}}_0x264129[_0x43510f(0x190)]=_0x453451,_0x264129[_0x43510f(0x192)]=_0xe0ed5d,_0x264129[_0x43510f(0x14d)]=_0xe0ed5d['toLowerCase']();}}};const _0x5d8733=_0x4a70f7[_0x5bd9ff(0x197)]['onNodeCreated'];_0x4a70f7[_0x5bd9ff(0x197)]['onNodeCreated']=function(){const _0x5a0a7d=_0x5bd9ff;_0x5d8733&&_0x5d8733['apply'](this,arguments),this[_0x5a0a7d(0x16d)](),this['setSize'](this[_0x5a0a7d(0x160)]()),this['setDirtyCanvas'](!![],!![]);};const _0x4b8711=_0x4a70f7[_0x5bd9ff(0x197)][_0x5bd9ff(0x174)];_0x4a70f7[_0x5bd9ff(0x197)][_0x5bd9ff(0x174)]=function(_0x57e193,_0x549d15,_0x1c07c7,_0x60e820){const _0x15d002=_0x5bd9ff;_0x4b8711&&_0x4b8711[_0x15d002(0x13a)](this,arguments),setTimeout(()=>{const _0x22c645=_0x15d002;this[_0x22c645(0x16d)](),this[_0x22c645(0x145)](!![],!![]);},0xa);};}function findTextWidgetInsertPosition(_0x2f6341){const _0x323a72=a0_0xea5f,_0x2bd99f=_0x2f6341[_0x323a72(0x16a)]?.['find'](_0x578903=>_0x578903[_0x323a72(0x14d)]==='▣\x20CANCEL');if(_0x2bd99f)return _0x2f6341[_0x323a72(0x16a)][_0x323a72(0x154)](_0x2bd99f)+0x1;const _0x5dc886=_0x2f6341[_0x323a72(0x16a)]?.[_0x323a72(0x13b)](_0x25e732=>_0x25e732[_0x323a72(0x14d)]===_0x323a72(0x131));if(_0x5dc886)return _0x2f6341[_0x323a72(0x16a)][_0x323a72(0x154)](_0x5dc886)+0x1;return _0x2f6341[_0x323a72(0x16a)][_0x323a72(0x152)];}app[a0_0x5f22f3(0x12c)]({'name':a0_0x5f22f3(0x165),async 'nodeCreated'(_0x3d9a91){const _0x54b9d7=a0_0x5f22f3;_0x3d9a91[_0x54b9d7(0x151)][_0x54b9d7(0x159)](_0x54b9d7(0x15d))&&(_0x3d9a91['imageData']=[{'filename':_0x54b9d7(0x142),'subfolder':'','type':_0x54b9d7(0x186)}]);if(_0x3d9a91[_0x54b9d7(0x151)][_0x54b9d7(0x159)](_0x54b9d7(0x14b))){addNativeControlPanel(_0x3d9a91);const _0xec269a=_0x3d9a91[_0x54b9d7(0x16a)]?.[_0x54b9d7(0x13b)](_0x5496f8=>_0x5496f8[_0x54b9d7(0x14d)]===_0x54b9d7(0x131));if(_0xec269a){const _0x12f342=_0xec269a['callback'];_0xec269a[_0x54b9d7(0x195)]=function(){const _0x5b36b2=_0x54b9d7;_0x12f342&&_0x12f342[_0x5b36b2(0x13a)](this,arguments),updateButtonVisibility(_0x3d9a91);};}_0x3d9a91[_0x54b9d7(0x196)](_0x3d9a91[_0x54b9d7(0x160)]());}if(_0x3d9a91[_0x54b9d7(0x151)]===_0x54b9d7(0x171)){const _0x1faf04=_0x3d9a91[_0x54b9d7(0x16a)]?.[_0x54b9d7(0x13b)](_0x3d41c7=>_0x3d41c7[_0x54b9d7(0x14d)]===_0x54b9d7(0x16b));_0x1faf04&&(_0x1faf04[_0x54b9d7(0x190)]=_0x54b9d7(0x13f),_0x1faf04[_0x54b9d7(0x160)]=()=>[0x0,0x0]),_0x3d9a91[_0x54b9d7(0x196)](_0x3d9a91[_0x54b9d7(0x160)]());}},async 'loadedGraphNode'(_0x578b59){const _0xc4d850=a0_0x5f22f3;if(_0x578b59[_0xc4d850(0x151)][_0xc4d850(0x159)](_0xc4d850(0x14b))){addNativeControlPanel(_0x578b59);if(_0x578b59[_0xc4d850(0x151)][_0xc4d850(0x159)](_0xc4d850(0x15d))){const _0xa5c437=_0x578b59[_0xc4d850(0x178)];_0x578b59[_0xc4d850(0x178)]=function(_0xf6ea08,_0xeb4ee5,_0x252825){const _0x1ded14=_0xc4d850,_0x1e0861=_0xa5c437?_0xa5c437[_0x1ded14(0x13a)](this,arguments):undefined;if(this['imgs']&&this[_0x1ded14(0x156)][_0x1ded14(0x152)]>0x1){const _0xd64617=_0xeb4ee5[0x0],_0xad734=this['size'][0x0];if(typeof this[_0x1ded14(0x14f)]!==_0x1ded14(0x182))this['imageIndex']=0x0;if(_0xf6ea08[_0x1ded14(0x153)]===0x0){if(_0xd64617<_0xad734*0.25){if(this[_0x1ded14(0x14f)]>0x0)this['imageIndex']--;}else{if(_0xd64617>_0xad734*0.75){if(this[_0x1ded14(0x14f)]<this[_0x1ded14(0x156)][_0x1ded14(0x152)]-0x1)this[_0x1ded14(0x14f)]++;}}}}return _0x1e0861;};}if(_0x578b59[_0xc4d850(0x151)][_0xc4d850(0x159)](_0xc4d850(0x15d))){if(_0x578b59[_0xc4d850(0x157)]?.[_0xc4d850(0x166)]){_0x578b59[_0xc4d850(0x17a)]=_0x578b59[_0xc4d850(0x157)][_0xc4d850(0x166)][_0xc4d850(0x180)]||_0x578b59[_0xc4d850(0x17a)];const _0x4bd427=_0x578b59[_0xc4d850(0x157)][_0xc4d850(0x166)][_0xc4d850(0x188)]||[];if(_0x4bd427[_0xc4d850(0x152)]>0x0){const _0x308121='preview_text';_0x4bd427[_0xc4d850(0x179)]((_0x2a140f,_0x176ce7)=>{const _0x524ad6=_0xc4d850,_0x3a23b0=_0x176ce7===0x0?_0x308121:_0x308121+'_'+_0x176ce7;let _0x1dfa09=_0x578b59[_0x524ad6(0x16a)]['find'](_0x72403=>_0x72403[_0x524ad6(0x14d)]===_0x3a23b0);if(!_0x1dfa09){const _0x2c1200=ComfyWidgets[_0x524ad6(0x158)](_0x578b59,_0x3a23b0,[_0x524ad6(0x158),{'multiline':!![]}],app);_0x1dfa09=_0x2c1200['widget'];const _0x286b67=_0x578b59[_0x524ad6(0x16a)][_0x524ad6(0x154)](_0x1dfa09);_0x286b67!==-0x1&&_0x578b59[_0x524ad6(0x16a)]['splice'](_0x286b67,0x1);const _0x49be8a=findTextWidgetInsertPosition(_0x578b59);_0x578b59[_0x524ad6(0x16a)][_0x524ad6(0x12e)](_0x49be8a+_0x176ce7,0x0,_0x1dfa09);}_0x1dfa09[_0x524ad6(0x190)]=_0x524ad6(0x188),_0x1dfa09[_0x524ad6(0x127)]=_0x2a140f,_0x1dfa09[_0x524ad6(0x140)]?_0x1dfa09[_0x524ad6(0x140)][_0x524ad6(0x13c)]=!![]:_0x1dfa09[_0x524ad6(0x140)]={'multiline':!![]};});}}}updateButtonVisibility(_0x578b59);}},async 'setup'(){const _0x85d7b1=a0_0x5f22f3;api['addEventListener'](_0x85d7b1(0x181),async({detail:_0x26c4cc})=>{const _0x46aafd=_0x85d7b1,{node_id:_0xbef6c8,node_type:_0x5ca7f1,action:_0x41b475,data:_0x5650be}=_0x26c4cc,_0x473cd7=app[_0x46aafd(0x18a)][_0x46aafd(0x125)](_0xbef6c8);if(!_0x473cd7)return;switch(_0x5ca7f1){case _0x46aafd(0x12d):handlePreviewData(_0x473cd7,_0x5650be);break;case _0x46aafd(0x14e):_0x41b475===_0x46aafd(0x14e)&&enterPauseState(_0x473cd7);break;case'preview_pause':updateImageServiceState(_0x473cd7,_0x5650be),updateTextServiceWidgets(_0x473cd7,_0x5650be&&_0x5650be['text']?_0x5650be[_0x46aafd(0x188)]:[]);_0x41b475===_0x46aafd(0x14e)&&enterPauseState(_0x473cd7);break;}});}});function handlePreviewData(_0x434f9f,_0x5abfd5){updateImageServiceState(_0x434f9f,_0x5abfd5),updateTextServiceWidgets(_0x434f9f,_0x5abfd5&&_0x5abfd5['text']?_0x5abfd5['text']:[]);}async function renderImageMode(_0xfdc525,_0x12430e){const _0x49bbe2=a0_0x5f22f3;if(!_0x12430e||_0x12430e[_0x49bbe2(0x152)]===0x0){_0xfdc525[_0x49bbe2(0x156)]=null,_0xfdc525['_ccnotes_full_imgs']=null;return;}const _0x275893=_0x12430e['map'](_0x5d5011=>{const _0xdde0f6=_0x49bbe2,_0x2407c8=new URLSearchParams({'filename':_0x5d5011[_0xdde0f6(0x194)],'type':_0x5d5011['type'],'subfolder':_0x5d5011['subfolder']}),_0x5c4397=api[_0xdde0f6(0x149)](_0xdde0f6(0x18d)+_0x2407c8[_0xdde0f6(0x17b)]());return new Promise(_0x68befe=>{const _0x24c552=_0xdde0f6,_0x3d6a31=new Image();_0x3d6a31['onload']=()=>_0x68befe(_0x3d6a31),_0x3d6a31['onerror']=()=>{const _0x1c0634=a0_0xea5f;console[_0x1c0634(0x137)]('['+(_0xfdc525[_0x1c0634(0x151)]||'PreviewNode')+_0x1c0634(0x183)+_0x5d5011[_0x1c0634(0x194)]),_0x68befe(null);},_0x3d6a31[_0x24c552(0x139)]=_0x5c4397;});}),_0x5e332b=(await Promise[_0x49bbe2(0x184)](_0x275893))[_0x49bbe2(0x18c)](_0x40adba=>_0x40adba!==null);_0x5e332b[_0x49bbe2(0x152)]>0x0&&(_0xfdc525[_0x49bbe2(0x156)]=_0x5e332b,_0xfdc525[_0x49bbe2(0x138)]=_0x5e332b['slice'](),_0x12430e&&_0x12430e[_0x49bbe2(0x152)]>0x0&&(_0xfdc525[_0x49bbe2(0x189)]=JSON['parse'](JSON[_0x49bbe2(0x16f)](_0x12430e))));}function getControlActionControl(_0x55ed51){const _0x515682=a0_0x5f22f3,_0xd57761=_0x55ed51[_0x515682(0x124)]?.[_0x515682(0x15b)](_0x3f552c=>_0x3f552c[_0x515682(0x14d)]==='action');if(_0xd57761===-0x1||_0xd57761===undefined)return{'isLinked':![]};const _0xb293c4=_0x55ed51[_0x515682(0x124)][_0xd57761],_0x5e439b=_0x55ed51['widgets']?.['find'](_0xb8c06e=>_0xb8c06e[_0x515682(0x14d)]===_0x515682(0x131));if(_0xb293c4[_0x515682(0x17c)])return{'isLinked':!![],'link':_0xb293c4['link'],'input':_0xb293c4};else{if(_0x5e439b)return{'isLinked':![],'widget':_0x5e439b};}return{'isLinked':![]};}function startAutoResumeCheck(_0x3a2759){const _0x2ed941=a0_0x5f22f3;if(_0x3a2759['check_timer'])clearInterval(_0x3a2759['check_timer']);_0x3a2759[_0x2ed941(0x146)]=setInterval(()=>{const _0x1ead39=_0x2ed941;if(!_0x3a2759[_0x1ead39(0x17f)]){clearInterval(_0x3a2759[_0x1ead39(0x146)]),_0x3a2759[_0x1ead39(0x146)]=null,_0x3a2759['_ccnotes_full_imgs']=null;return;}if(_0x3a2759[_0x1ead39(0x156)]&&_0x3a2759[_0x1ead39(0x156)][_0x1ead39(0x152)]>0x0){_0x3a2759[_0x1ead39(0x138)]&&_0x3a2759[_0x1ead39(0x156)][_0x1ead39(0x152)]===_0x3a2759[_0x1ead39(0x138)][_0x1ead39(0x152)]&&(typeof _0x3a2759[_0x1ead39(0x14f)]===_0x1ead39(0x182)&&(_0x3a2759[_0x1ead39(0x185)]=_0x3a2759[_0x1ead39(0x14f)]));for(let _0x4429fa=0x0;_0x4429fa<_0x3a2759[_0x1ead39(0x156)][_0x1ead39(0x152)];_0x4429fa++){const _0x59d2b6=_0x3a2759[_0x1ead39(0x156)][_0x4429fa];if(_0x59d2b6&&_0x59d2b6['src']&&_0x59d2b6[_0x1ead39(0x139)]['includes']('filename=clipspace-mask-'))try{let _0x5f57f2=_0x4429fa;if(_0x3a2759[_0x1ead39(0x138)]&&_0x3a2759['_ccnotes_full_imgs'][_0x1ead39(0x152)]>_0x3a2759[_0x1ead39(0x156)][_0x1ead39(0x152)]){if(typeof _0x3a2759[_0x1ead39(0x185)]===_0x1ead39(0x182))_0x5f57f2=_0x3a2759['_ccnotes_last_valid_index'];else typeof _0x3a2759[_0x1ead39(0x14f)]===_0x1ead39(0x182)?_0x5f57f2=_0x3a2759[_0x1ead39(0x14f)]:_0x5f57f2=0x0;}const _0x19aece=new URL(_0x59d2b6[_0x1ead39(0x139)]),_0x10cafc=_0x19aece[_0x1ead39(0x167)][_0x1ead39(0x17d)](_0x1ead39(0x194)),_0x10b09a=_0x19aece[_0x1ead39(0x167)][_0x1ead39(0x17d)](_0x1ead39(0x134)),_0x2a85a6=_0x19aece[_0x1ead39(0x167)][_0x1ead39(0x17d)](_0x1ead39(0x190));if(_0x10cafc&&_0x3a2759[_0x1ead39(0x189)]){const _0x5979b9=_0x3a2759[_0x1ead39(0x189)][_0x5f57f2];if(!_0x5979b9||_0x5979b9[_0x1ead39(0x194)]!==_0x10cafc){if(!_0x3a2759[_0x1ead39(0x189)][_0x5f57f2])_0x3a2759['_ccnotes_full_images_data'][_0x5f57f2]={};_0x3a2759[_0x1ead39(0x189)][_0x5f57f2]={'filename':_0x10cafc,'subfolder':_0x10b09a,'type':_0x2a85a6},_0x3a2759[_0x1ead39(0x138)]&&_0x5f57f2<_0x3a2759[_0x1ead39(0x138)]['length']&&(_0x3a2759['_ccnotes_full_imgs'][_0x5f57f2]=_0x59d2b6);}}}catch(_0x4a6eea){console[_0x1ead39(0x137)](_0x1ead39(0x141),_0x4a6eea);}}}_0x3a2759[_0x1ead39(0x138)]&&_0x3a2759[_0x1ead39(0x138)][_0x1ead39(0x152)]>0x1&&(_0x3a2759[_0x1ead39(0x156)]&&_0x3a2759[_0x1ead39(0x156)][_0x1ead39(0x152)]<_0x3a2759[_0x1ead39(0x138)][_0x1ead39(0x152)]&&(_0x3a2759[_0x1ead39(0x156)]=_0x3a2759['_ccnotes_full_imgs'][_0x1ead39(0x169)](),app[_0x1ead39(0x18a)][_0x1ead39(0x145)](!![],![])));const _0x4ec4c4=getControlActionValue(_0x3a2759),_0x5de4f6=String(_0x4ec4c4)[_0x1ead39(0x147)]();if(_0x5de4f6['includes'](_0x1ead39(0x177)))sendAction(_0x3a2759,'▶\x20CONTINUE');else _0x5de4f6[_0x1ead39(0x159)](_0x1ead39(0x164))&&(api[_0x1ead39(0x123)](),sendAction(_0x3a2759,_0x1ead39(0x133)));},0xc8);}function getControlActionValue(_0x121f13){const _0x895af8=a0_0x5f22f3,_0x51f36c=getControlActionControl(_0x121f13);if(_0x51f36c['isLinked']){const _0x17e003=app[_0x895af8(0x18a)][_0x895af8(0x14c)][_0x51f36c[_0x895af8(0x17c)]];if(!_0x17e003)return _0x895af8(0x14e);const _0x37fb7d=app[_0x895af8(0x18a)][_0x895af8(0x125)](_0x17e003[_0x895af8(0x150)]);if(!_0x37fb7d)return'pause';if(_0x37fb7d[_0x895af8(0x16a)]&&_0x37fb7d[_0x895af8(0x16a)][_0x895af8(0x152)]>0x0)return String(_0x37fb7d[_0x895af8(0x16a)][0x0][_0x895af8(0x127)]);}else{if(_0x51f36c['widget'])return String(_0x51f36c[_0x895af8(0x12b)]['value']);}return'pause';}function addNativeControlPanel(_0x2efa63){updateButtonVisibility(_0x2efa63);}function updateButtonVisibility(_0x214b6e){const _0x1899a0=a0_0x5f22f3,_0x439206=_0x214b6e['widgets']?.[_0x1899a0(0x13b)](_0x12b1eb=>_0x12b1eb['name']===_0x1899a0(0x131));if(!_0x439206)return;const _0x2d2e2a=_0x439206[_0x1899a0(0x127)],_0x5ccb1f=_0x2d2e2a===_0x1899a0(0x14b),_0x734d37=_0x214b6e['widgets']?.['find'](_0xba7984=>_0xba7984[_0x1899a0(0x14d)]===_0x1899a0(0x187)),_0x13beac=_0x214b6e[_0x1899a0(0x16a)]?.[_0x1899a0(0x13b)](_0x16b006=>_0x16b006[_0x1899a0(0x14d)]==='▣\x20CANCEL'),_0x2b40e9=_0x734d37&&_0x13beac;if(_0x5ccb1f&&!_0x2b40e9){const _0x3126f5={'serialize':![]},_0x4bc091=_0x214b6e[_0x1899a0(0x18b)](_0x1899a0(0x153),_0x1899a0(0x172),null,()=>sendAction(_0x214b6e,_0x1899a0(0x187)),_0x3126f5);_0x4bc091[_0x1899a0(0x14d)]='▶\x20CONTINUE';const _0x3fcd81=_0x214b6e[_0x1899a0(0x18b)]('button',_0x1899a0(0x164),null,()=>{const _0x501d0b=_0x1899a0;api[_0x501d0b(0x123)](),sendAction(_0x214b6e,'▣\x20CANCEL');},_0x3126f5);_0x3fcd81[_0x1899a0(0x14d)]=_0x1899a0(0x133);const _0x53cdd0=_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x15b)](_0x5de636=>_0x5de636[_0x1899a0(0x14d)]===_0x1899a0(0x131));if(_0x53cdd0!==-0x1){const _0x16b507=_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x154)](_0x4bc091),_0x498831=_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x154)](_0x3fcd81);if(_0x16b507!==-0x1)_0x214b6e['widgets'][_0x1899a0(0x12e)](_0x16b507,0x1);if(_0x498831!==-0x1){const _0x4f825c=_0x16b507!==-0x1&&_0x498831>_0x16b507?_0x498831-0x1:_0x498831;_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x12e)](_0x4f825c,0x1);}_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x12e)](_0x53cdd0+0x1,0x0,_0x4bc091,_0x3fcd81);}_0x214b6e[_0x1899a0(0x196)](_0x214b6e[_0x1899a0(0x160)]()),app['graph']&&app[_0x1899a0(0x18a)][_0x1899a0(0x145)](!![],!![]);}else{if(!_0x5ccb1f&&_0x2b40e9){const _0x3a4cc5=_0x214b6e['widgets'][_0x1899a0(0x154)](_0x734d37),_0xc4c535=_0x214b6e['widgets']['indexOf'](_0x13beac);_0x3a4cc5!==-0x1&&_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x12e)](_0x3a4cc5,0x1);if(_0xc4c535!==-0x1){const _0x122706=_0x3a4cc5!==-0x1&&_0xc4c535>_0x3a4cc5?_0xc4c535-0x1:_0xc4c535;_0x214b6e[_0x1899a0(0x16a)][_0x1899a0(0x12e)](_0x122706,0x1);}_0x214b6e['setSize'](_0x214b6e[_0x1899a0(0x160)]()),app[_0x1899a0(0x18a)]&&app[_0x1899a0(0x18a)][_0x1899a0(0x145)](!![],!![]);}}}function sendAction(_0x4e1ec9,_0x3e68ef){const _0x2e40fb=a0_0x5f22f3;_0x4e1ec9[_0x2e40fb(0x17f)]=![];_0x4e1ec9[_0x2e40fb(0x146)]&&(clearInterval(_0x4e1ec9[_0x2e40fb(0x146)]),_0x4e1ec9[_0x2e40fb(0x146)]=null);const _0x2d4461=_0x3e68ef[_0x2e40fb(0x147)](),_0x575852=_0x2e40fb(0x16b),_0x1cef52=_0x4e1ec9['widgets']?.[_0x2e40fb(0x18c)](_0x2cdb95=>_0x2cdb95[_0x2e40fb(0x14d)]===_0x575852||_0x2cdb95[_0x2e40fb(0x14d)][_0x2e40fb(0x136)](_0x575852+'_'));_0x1cef52['sort']((_0x1b8bd9,_0x59fd05)=>{const _0x35e1a5=_0x2e40fb;if(_0x1b8bd9[_0x35e1a5(0x14d)]===_0x575852)return-0x1;if(_0x59fd05['name']===_0x575852)return 0x1;const _0x518948=parseInt(_0x1b8bd9['name'][_0x35e1a5(0x161)]('_')[0x2]||0x0),_0x1de697=parseInt(_0x59fd05['name'][_0x35e1a5(0x161)]('_')[0x2]||0x0);return _0x518948-_0x1de697;});let _0x2aeaea=[];_0x1cef52&&_0x1cef52[_0x2e40fb(0x152)]>0x0&&(_0x2aeaea=_0x1cef52[_0x2e40fb(0x13d)](_0x61c0dc=>_0x61c0dc[_0x2e40fb(0x127)]));if(_0x2d4461[_0x2e40fb(0x159)](_0x2e40fb(0x177))||_0x2d4461[_0x2e40fb(0x159)](_0x2e40fb(0x172))||_0x2d4461[_0x2e40fb(0x159)](_0x2e40fb(0x164))){const _0x478511=getControlActionControl(_0x4e1ec9),_0xd1c5d8=_0x4e1ec9[_0x2e40fb(0x16e)]!==undefined?_0x4e1ec9[_0x2e40fb(0x16e)]:_0x2e40fb(0x14b);if(_0x478511[_0x2e40fb(0x162)]&&_0x478511[_0x2e40fb(0x17c)]){const _0xfb92b0=app[_0x2e40fb(0x18a)][_0x2e40fb(0x14c)][_0x478511[_0x2e40fb(0x17c)]],_0x47fafb=app[_0x2e40fb(0x18a)][_0x2e40fb(0x125)](_0xfb92b0[_0x2e40fb(0x150)]);if(_0x47fafb&&_0x47fafb['widgets']&&_0x47fafb['widgets'][_0x2e40fb(0x152)]>0x0){const _0x3696d4=_0x47fafb[_0x2e40fb(0x16a)][0x0];_0x3696d4[_0x2e40fb(0x127)]!==_0xd1c5d8&&(_0x3696d4[_0x2e40fb(0x127)]=_0xd1c5d8,_0x47fafb['setDirtyCanvas'](!![],!![]));}}else _0x478511[_0x2e40fb(0x12b)]&&(_0x478511['widget'][_0x2e40fb(0x127)]=_0xd1c5d8,_0x4e1ec9['setDirtyCanvas'](!![],!![]));setTimeout(()=>{updateButtonVisibility(_0x4e1ec9);},0x1);}let _0x37cd2a='continue';if(_0x2d4461[_0x2e40fb(0x159)](_0x2e40fb(0x164)))_0x37cd2a=_0x2e40fb(0x164);const _0x1db80b={'node_id':_0x4e1ec9['id'],'action':_0x37cd2a,'edited_text':_0x2aeaea,'images':_0x4e1ec9[_0x2e40fb(0x189)]};api[_0x2e40fb(0x163)]('/ccnotes/resume_pause',{'method':_0x2e40fb(0x130),'headers':{'Content-Type':_0x2e40fb(0x12a)},'body':JSON[_0x2e40fb(0x16f)](_0x1db80b)})[_0x2e40fb(0x15f)](_0x555e18=>{const _0xe52024=_0x2e40fb;console['error']('['+(_0x4e1ec9[_0xe52024(0x151)]||_0xe52024(0x126))+_0xe52024(0x129),_0x555e18);});}function updateTextServiceWidgets(_0x1a1a0a,_0x36d721){const _0x488176=a0_0x5f22f3,_0x2c4e4d='preview_text';_0x36d721=_0x36d721||[];const _0x4de946=_0x1a1a0a[_0x488176(0x16a)]['filter'](_0x38d24e=>_0x38d24e['name']===_0x2c4e4d||_0x38d24e['name'][_0x488176(0x136)](_0x2c4e4d+'_'));_0x4de946[_0x488176(0x179)](_0x1c24e8=>{const _0x452038=_0x488176;_0x1c24e8['type']='hidden',_0x1c24e8[_0x452038(0x160)]=()=>[0x0,0x0],_0x1c24e8['value']='';}),_0x36d721[_0x488176(0x152)]>0x0&&_0x36d721[_0x488176(0x179)]((_0x589494,_0x3276d5)=>{const _0x265b06=_0x488176,_0x208e34=_0x3276d5===0x0?_0x2c4e4d:_0x2c4e4d+'_'+_0x3276d5;let _0x5deaa4=_0x1a1a0a[_0x265b06(0x16a)][_0x265b06(0x13b)](_0x30ed4b=>_0x30ed4b[_0x265b06(0x14d)]===_0x208e34);if(!_0x5deaa4){const _0x231766=ComfyWidgets[_0x265b06(0x158)](_0x1a1a0a,_0x208e34,[_0x265b06(0x158),{'multiline':!![]}],app);_0x5deaa4=_0x231766[_0x265b06(0x12b)];const _0x2168e4=_0x1a1a0a[_0x265b06(0x16a)][_0x265b06(0x154)](_0x5deaa4);if(_0x2168e4!==-0x1){_0x1a1a0a[_0x265b06(0x16a)][_0x265b06(0x12e)](_0x2168e4,0x1);let _0x27e18e=findTextWidgetInsertPosition(_0x1a1a0a);const _0x233fa0=_0x1a1a0a[_0x265b06(0x16a)][_0x265b06(0x13e)](_0x352d74=>_0x352d74['name']['startsWith'](_0x2c4e4d));_0x233fa0!==-0x1&&_0x233fa0>=_0x27e18e&&(_0x27e18e=_0x233fa0+0x1),_0x1a1a0a[_0x265b06(0x16a)][_0x265b06(0x12e)](_0x27e18e,0x0,_0x5deaa4);}}_0x5deaa4[_0x265b06(0x190)]=_0x265b06(0x188),_0x5deaa4[_0x265b06(0x127)]=_0x589494,_0x5deaa4['computeSize']=function(_0x33340e){const _0x32caa7=_0x265b06,_0x4faedd=0x21,_0x50aaf5=0x60,_0x498a2e=0x2,_0x506e87=0xc,_0x57eb4f=(this[_0x32caa7(0x127)]||'')[_0x32caa7(0x161)]('\x0a')[_0x32caa7(0x152)],_0x1dd0e3=_0x57eb4f*_0x506e87+_0x498a2e*0x3;return[_0x33340e,Math[_0x32caa7(0x15e)](_0x4faedd,Math[_0x32caa7(0x18f)](_0x1dd0e3,_0x50aaf5))];},_0x5deaa4[_0x265b06(0x140)]?_0x5deaa4['options'][_0x265b06(0x13c)]=!![]:_0x5deaa4['options']={'multiline':!![]},_0x5deaa4[_0x265b06(0x155)]&&(_0x5deaa4[_0x265b06(0x155)]['style'][_0x265b06(0x175)]='',_0x5deaa4['inputEl'][_0x265b06(0x168)]=![]);}),setTimeout(()=>{const _0x3345e3=_0x488176;app[_0x3345e3(0x18a)]['setDirtyCanvas'](!![],![]);},0x1);}function a0_0xea5f(_0x150ec7,_0x55af75){_0x150ec7=_0x150ec7-0x123;const _0x33c704=a0_0x33c7();let _0xea5f90=_0x33c704[_0x150ec7];if(a0_0xea5f['BnjFoo']===undefined){var _0x304b84=function(_0x8b3980){const _0x696d4e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4a70f7='',_0x291d17='';for(let _0x5d8733=0x0,_0x4b8711,_0x4ebea4,_0x2c224b=0x0;_0x4ebea4=_0x8b3980['charAt'](_0x2c224b++);~_0x4ebea4&&(_0x4b8711=_0x5d8733%0x4?_0x4b8711*0x40+_0x4ebea4:_0x4ebea4,_0x5d8733++%0x4)?_0x4a70f7+=String['fromCharCode'](0xff&_0x4b8711>>(-0x2*_0x5d8733&0x6)):0x0){_0x4ebea4=_0x696d4e['indexOf'](_0x4ebea4);}for(let _0x3f7fb8=0x0,_0x65e984=_0x4a70f7['length'];_0x3f7fb8<_0x65e984;_0x3f7fb8++){_0x291d17+='%'+('00'+_0x4a70f7['charCodeAt'](_0x3f7fb8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x291d17);};a0_0xea5f['ANgTba']=_0x304b84,a0_0xea5f['PpCxkI']={},a0_0xea5f['BnjFoo']=!![];}const _0x22eb29=_0x33c704[0x0],_0xc3dd3c=_0x150ec7+_0x22eb29,_0x20e447=a0_0xea5f['PpCxkI'][_0xc3dd3c];return!_0x20e447?(_0xea5f90=a0_0xea5f['ANgTba'](_0xea5f90),a0_0xea5f['PpCxkI'][_0xc3dd3c]=_0xea5f90):_0xea5f90=_0x20e447,_0xea5f90;}function updateImageServiceState(_0x29d9a5,_0x13a840){const _0x33f9c8=a0_0x5f22f3;_0x13a840&&_0x13a840[_0x33f9c8(0x180)]&&_0x13a840['images'][_0x33f9c8(0x152)]>0x0?(_0x29d9a5['imageData']=_0x13a840['images'],renderImageMode(_0x29d9a5,_0x13a840['images']),!_0x29d9a5[_0x33f9c8(0x157)][_0x33f9c8(0x166)]&&(_0x29d9a5[_0x33f9c8(0x157)][_0x33f9c8(0x166)]={}),_0x29d9a5[_0x33f9c8(0x157)][_0x33f9c8(0x166)][_0x33f9c8(0x180)]=_0x13a840[_0x33f9c8(0x180)],_0x29d9a5[_0x33f9c8(0x157)][_0x33f9c8(0x166)]['text']=_0x13a840[_0x33f9c8(0x188)]):(_0x29d9a5[_0x33f9c8(0x156)]=null,_0x29d9a5[_0x33f9c8(0x17a)]=null,_0x29d9a5[_0x33f9c8(0x157)][_0x33f9c8(0x166)]&&delete _0x29d9a5['properties'][_0x33f9c8(0x166)]);}function enterPauseState(_0x501163){const _0x3147f5=a0_0x5f22f3,_0x5a0daa=getControlActionControl(_0x501163);if(_0x5a0daa[_0x3147f5(0x162)]&&_0x5a0daa[_0x3147f5(0x17c)]){const _0x101d19=app[_0x3147f5(0x18a)][_0x3147f5(0x14c)][_0x5a0daa['link']],_0x582c7d=app[_0x3147f5(0x18a)]['getNodeById'](_0x101d19[_0x3147f5(0x150)]);_0x582c7d&&_0x582c7d[_0x3147f5(0x16a)]&&_0x582c7d['widgets']['length']>0x0&&(_0x501163[_0x3147f5(0x16e)]=_0x582c7d[_0x3147f5(0x16a)][0x0][_0x3147f5(0x127)]);}else _0x5a0daa[_0x3147f5(0x12b)]?_0x501163[_0x3147f5(0x16e)]=_0x5a0daa[_0x3147f5(0x12b)][_0x3147f5(0x127)]:_0x501163['_restore_state']=_0x3147f5(0x14b);_0x501163[_0x3147f5(0x17f)]=!![],startAutoResumeCheck(_0x501163);}